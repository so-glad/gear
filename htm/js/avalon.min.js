(function (r, $) {
    "object" === typeof module && "object" === typeof module.exports ? module.exports = r.document ? $(r, !0) : function (r) {
        if (!r.document)throw Error("Avalon requires a window with a document");
        return $(r)
    } : $(r)
})("undefined" !== typeof window ? window : this, function (r, $) {
    function x() {
        r.console && avalon.config.debug && Function.apply.call(console.log, console, arguments)
    }

    function z() {
    }

    function S(b, c) {
        "string" === typeof b && (b = b.match(A) || []);
        for (var d = {}, e = void 0 !== c ? c : 1, f = 0, g = b.length; f < g; f++)d[b[f]] = e;
        return d
    }

    function qa(b) {
        function c(e, f) {
            d.push(e) > b && delete c[d.shift()];
            return c[e] = f
        }

        var d = [];
        return c
    }

    function Ya(b) {
        return Zb.test(aa.call(b))
    }

    function Za(b, c) {
        b = Math.floor(b) || 0;
        return 0 > b ? Math.max(c + b, 0) : Math.min(b, c)
    }

    function ba(b, c, d) {
        b = "for(var " + b + "i=0,n = this.length; i < n; i++){" + c.replace("_", "((i in this) && fn.call(scope,this[i],i,this))") + "}" + d;
        return Function("fn,scope", b)
    }

    function $a(b, c) {
        try {
            for (; c = c.parentNode;)if (c === b)return !0;
            return !1
        } catch (d) {
            return !1
        }
    }

    function ab() {
        return (new XMLSerializer).serializeToString(this)
    }

    function $b(b) {
        var c = {}, d;
        for (d in b)c[d] = b[d];
        d = c.target = b.srcElement;
        0 === b.type.indexOf("key") ? c.which = null != b.charCode ? b.charCode : b.keyCode : ac.test(b.type) && (d = d.ownerDocument || q, d = "BackCompat" === d.compatMode ? d.body : d.documentElement, c.pageX = b.clientX + (d.scrollLeft >> 0) - (d.clientLeft >> 0), c.pageY = b.clientY + (d.scrollTop >> 0) - (d.clientTop >> 0), c.wheelDeltaY = c.wheelDelta, c.wheelDeltaX = 0);
        c.timeStamp = new Date - 0;
        c.originalEvent = b;
        c.preventDefault = function () {
            b.returnValue = !1
        };
        c.stopPropagation = function () {
            b.cancelBubble = !0
        };
        return c
    }

    function u(b) {
        for (var c in b)if (L.call(b, c)) {
            var d = b[c];
            if ("function" === typeof u.plugins[c])u.plugins[c](d); else"object" === typeof u[c] ? avalon.mix(u[c], d) : u[c] = d
        }
        return this
    }

    function bc(b, c, d) {
        if (T(c) || c && c.nodeType || -1 !== d.indexOf(b) || -1 !== ra.indexOf(b))return !1;
        c = d.$special;
        return b && "$" === b.charAt(0) && !c[b] ? !1 : !0
    }

    function cc(b, c, d, e) {
        switch (b.type) {
            case 0:
                var f = b.get;
                b = b.set;
                if (T(b)) {
                    var g = e.$events, h = g[c];
                    g[c] = [];
                    b.call(e, d);
                    g[c] = h
                }
                return f.call(e);
            case 1:
                return d;
            case 2:
                return d !==
                e.$model[c] && (c = b.svmodel = dc(e, c, d, b.valueType), d = c.$model, (c = sa[c.$id]) && c()), d
        }
    }

    function M(b, c, d) {
        if (Array.isArray(b)) {
            var e = b.concat();
            b.length = 0;
            c = ec(b);
            c.pushArray(e);
            return c
        }
        if ("number" === typeof b.nodeType || b.$id && b.$events)return b;
        Array.isArray(b.$skipArray) || (b.$skipArray = []);
        b.$skipArray.$special = c || {};
        var f = {};
        d = d || {};
        var g = {}, h = {}, k = [];
        for (e in b)(function (c, e) {
            d[c] = e;
            if (bc(c, e, b.$skipArray)) {
                g[c] = [];
                var l = avalon.type(e), s = function (b) {
                    var c = s._name, d = this, e = d.$model, f = e[c], g = d.$events;
                    if (arguments.length)ua || (1 !== s.type && (b = cc(s, c, b, d)), cb(f, b) || (e[c] = b, g.$digest ? s.pedding || (s.pedding = !0, setTimeout(function () {
                        va(g[c]);
                        d.$events && W.$fire.call(d, c, e[c], f);
                        s.pedding = !1
                    })) : (va(g[c]), d.$events && W.$fire.call(d, c, b, f)))); else {
                        if (0 === s.type)return e[c] = s.get.call(d);
                        fc(g[c]);
                        return s.svmodel || f
                    }
                };
                "object" === l && T(e.get) && 2 >= Object.keys(e).length ? (s.set = e.set, s.get = e.get, s.type = 0, k.push(function () {
                    var b = {
                        evaluator: function () {
                            b.element = null;
                            b.type = new Date - 0;
                            d[c] = s.get.call(f)
                        }, element: I,
                        type: new Date - 0, handler: z, args: []
                    };
                    da[D] = b;
                    s.call(f);
                    delete da[D]
                })) : db.test(l) ? (s.type = 2, s.valueType = e.valueType, k.push(function () {
                    var b = M(e, 0, d[c]);
                    s.svmodel = b;
                    b.$events[G] = g[c]
                })) : s.type = 1;
                s._name = c;
                h[c] = s
            }
        })(e, b[e]);
        ra.forEach(function (c) {
            delete b[c];
            delete d[c]
        });
        var f = wa(f, gc(h), b), l;
        for (l in b)h[l] || (f[l] = b[l]);
        f.$id = N();
        f.$model = d;
        f.$events = g;
        for (e in W)c = W[e], y || (c = c.bind(f)), f[e] = c;
        xa ? Object.defineProperty(f, "hasOwnProperty", {
            value: function (b) {
                return b in this.$model
            }, writable: !1, enumerable: !1,
            configurable: !0
        }) : f.hasOwnProperty = function (b) {
            return b in f.$model
        };
        k.forEach(function (b) {
            b()
        });
        return f
    }

    function dc(b, c, d, e) {
        var f = b[c];
        if ("array" === e) {
            if (!Array.isArray(d) || f === d)return f;
            f.clear();
            f.pushArray(d.concat());
            return f
        }
        var g = b.$events[c];
        if (b = f.$events.$withProxyPool)ya(b, "with"), f.$events.$withProxyPool = null;
        var h = M(d);
        h.$events[G] = g;
        sa[h.$id] = function (b) {
            for (; b = g.shift();)(function (b) {
                avalon.nextTick(function () {
                    b.type && (b.rollback && b.rollback(), v[b.type](b, b.vmodels))
                })
            })(b);
            delete sa[h.$id]
        };
        return h
    }

    function ec(b) {
        var c = [];
        c.$id = N();
        c.$model = b;
        c.$events = {};
        c.$events[G] = [];
        c._ = M({length: b.length});
        c._.$watch("length", function (b, d) {
            c.$fire("length", b, d)
        });
        for (var d in W)c[d] = W[d];
        avalon.mix(c, eb);
        return c
    }

    function X(b, c, d, e, f, g, h) {
        for (var k = this.length, l = 2; --l;) {
            switch (b) {
                case "add":
                    var m = this.$model.slice(c, c + d).map(function (b) {
                        return db.test(avalon.type(b)) ? b.$id ? b : M(b, 0, b) : b
                    });
                    za.apply(this, [c, 0].concat(m));
                    this._fire("add", c, d);
                    break;
                case "del":
                    var n = this._splice(c, d);
                    this._fire("del",
                        c, d)
            }
            f && (b = f, c = g, d = h, l = 2, f = 0)
        }
        this._fire("index", e);
        this.length !== k && (this._.length = this.length);
        return n
    }

    function Aa(b, c) {
        for (var d = {}, e = 0, f = c.length; e < f; e++) {
            d[e] = b[e];
            var g = c[e];
            g in d ? (b[e] = d[g], delete d[g]) : b[e] = b[g]
        }
    }

    function Ba(b) {
        da[D] = b;
        avalon.openComputedCollect = !0;
        var c = b.evaluator;
        if (c)try {
            var d = hc.test(b.type) ? b : c.apply(0, b.args);
            b.handler(d, b.element, b)
        } catch (e) {
            delete b.evaluator, c = b.element, 3 === c.nodeType && (d = c.parentNode, u.commentInterpolate ? d.replaceChild(q.createComment(b.value),
                c) : c.data = O + b.value + P)
        }
        avalon.openComputedCollect = !1;
        delete da[D]
    }

    function fc(b) {
        var c = da[D];
        b && (c && avalon.Array.ensure(b, c) && c.element) && Ca(c, b)
    }

    function Ca(b, c) {
        b.$uuid = b.$uuid || N();
        c.$uuid = c.$uuid || N();
        var d = {data: b, list: c, $$uuid: b.$uuid + c.$uuid};
        Q[d.$$uuid] || (Q[d.$$uuid] = 1, Q.push(d))
    }

    function fb(b) {
        b.element = null;
        b.rollback && b.rollback();
        for (var c in b)b[c] = null
    }

    function ic(b) {
        try {
            if (!b.parentNode)return !0
        } catch (c) {
            return !0
        }
        return b.msRetain ? 0 : 1 === b.nodeType ? "number" === typeof b.sourceIndex ? 0 ===
        b.sourceIndex : !B.contains(b) : !avalon.contains(B, b)
    }

    function gb() {
        for (var b = Q.length, c = b, d = 0, e, f = [], g = {}, h = {}; e = Q[--b];) {
            var k = e.data;
            e = k.type;
            g[e] ? g[e]++ : (g[e] = 1, f.push(e))
        }
        var l = !1;
        f.forEach(function (b) {
            hb[b] !== g[b] && (h[b] = 1, l = !0)
        });
        b = c;
        if (l)for (; e = Q[--b];)k = e.data, void 0 !== k.element && (h[k.type] && ic(k.element)) && (d++, Q.splice(b, 1), delete Q[e.$$uuid], avalon.Array.remove(e.list, k), fb(k), e.data = e.list = null);
        hb = g;
        ib = new Date
    }

    function va(b) {
        if (b && b.length) {
            444 < new Date - ib && "object" === typeof b[0] && gb();
            for (var c = la.call(arguments, 1), d = b.length, e; e = b[--d];) {
                var f = e.element;
                f && f.parentNode && (e.$repeat ? e.handler.apply(e, c) : "on" !== e.type && e.handler((e.evaluator || z).apply(0, e.args || []), f, e))
            }
        }
    }

    function jb(b) {
        var c = b.nodeName;
        return c.toLowerCase() === c && b.scopeName && "" === b.outerText
    }

    function jc(b) {
        "url(#default#VML)" !== b.currentStyle.behavior && (b.style.behavior = "url(#default#VML)", b.style.display = "inline-block", b.style.zoom = 1)
    }

    function ma(b, c, d) {
        var e = setTimeout(function () {
            var f = b.innerHTML;
            clearTimeout(e);
            f === d ? c() : ma(b, c, f)
        })
    }

    function kb(b, c) {
        var d = b.getAttribute("avalonctrl") || c.$id;
        b.setAttribute("avalonctrl", d);
        c.$events.expr = b.tagName + '[avalonctrl="' + d + '"]'
    }

    function Da(b, c) {
        for (var d = 0, e; e = b[d++];)e.vmodels = c, v[e.type](e, c), e.evaluator && (e.element && 1 === e.element.nodeType) && e.element.removeAttribute(e.name);
        b.length = 0
    }

    function kc(b, c) {
        return b.priority - c.priority
    }

    function lb(b, c, d) {
        var e = b.getAttribute("ms-skip");
        if (!b.getAttributeNode)return x("warning " + b.tagName + " no getAttributeNode method");
        var f = b.getAttributeNode("ms-important");
        d = b.getAttributeNode("ms-controller");
        if ("string" !== typeof e) {
            if (d = f || d) {
                e = avalon.vmodels[d.value];
                if (!e)return;
                c = d === f ? [e] : [e].concat(c);
                f = d.name;
                b.removeAttribute(f);
                avalon(b).removeClass(f);
                kb(b, e)
            }
            mb(b, c)
        }
    }

    function lc(b, c) {
        for (var d = b.firstChild; d;) {
            var e = d.nextSibling;
            nb(d, d.nodeType, c);
            d = e
        }
    }

    function na(b, c) {
        for (var d = 0, e; e = b[d++];)nb(e, e.nodeType, c)
    }

    function nb(b, c, d) {
        1 === c ? lb(b, d) : 3 === c && ea.test(b.data) ? ob(b, d) : u.commentInterpolate && (8 === c && !ea.test(b.nodeValue)) &&
        ob(b, d)
    }

    function mb(b, c) {
        for (var d = pb ? pb(b) : avalon.slice(b.attributes), e = [], f = {}, g, h = 0, k; k = d[h++];)if (k.specified && (g = k.name.match(qb))) {
            var l = g[1], m = g[2] || "", n = k.value;
            k = k.name;
            f[k] = n;
            mc[l] ? (m = l, l = "on"):nc[l] && (x("ms-" + l + "\u5df2\u7ecf\u88ab\u5e9f\u5f03,\u8bf7\u4f7f\u7528ms-attr-*\u4ee3\u66ff"), "enabled" === l && (l = "disabled", n = "!(" + n + ")"), m = l, l = "attr", b.removeAttribute(k), k = "ms-attr-" + m, b.setAttribute(k, n), g = [k], f[k] = n);
            if ("function" === typeof v[l]) {
                var p = {
                    type: l, param: m, element: b, name: g[0], value: n,
                    priority: l in rb ? rb[l] : 10 * l.charCodeAt(0) + (Number(m) || 0)
                };
                if ("html" === l || "text" === l)m = Ea(n), avalon.mix(p, m), p.filters = p.filters.replace(sb, function () {
                    p.type = "html";
                    p.group = 1;
                    return ""
                });
                "ms-if-loop" === k && (p.priority += 100);
                c.length && (e.push(p), "widget" === l && (b.msData = b.msData || f))
            }
        }
        e.sort(kc);
        f["ms-attr-checked"] && f["ms-duplex"] && x("warning!\u4e00\u4e2a\u5143\u7d20\u4e0a\u4e0d\u80fd\u540c\u65f6\u5b9a\u4e49ms-attr-checked\u4e0ems-duplex");
        d = !0;
        for (h = 0; p = e[h]; h++) {
            l = p.type;
            if (oc.test(l))return Da(e.slice(0,
                h + 1), c);
            d && (d = !pc.test(l))
        }
        Da(e, c);
        d && (!qc[b.tagName] && tb.test(b.innerHTML.replace(rc, "<").replace(sc, ">"))) && (ub && ub(b), lc(b, c))
    }

    function Ea(b) {
        if (0 < b.indexOf("|")) {
            var c = b.replace(tc, "\u1122\u3344").indexOf("|");
            if (-1 < c)return {filters: b.slice(c), value: b.slice(0, c), expr: !0}
        }
        return {value: b, filters: "", expr: !0}
    }

    function Fa(b) {
        var c = [], d;
        d = 0;
        var e;
        do {
            e = b.indexOf(O, d);
            if (-1 === e)break;
            (d = b.slice(d, e)) && c.push({value: d, filters: "", expr: !1});
            d = e + O.length;
            e = b.indexOf(P, d);
            if (-1 === e)break;
            (d = b.slice(d, e)) &&
            c.push(Ea(d));
            d = e + P.length
        } while (1);
        (d = b.slice(d)) && c.push({value: d, expr: !1, filters: ""});
        return c
    }

    function ob(b, c) {
        var d = [];
        if (8 === b.nodeType)var e = Ea(b.nodeValue), f = [e]; else f = Fa(b.data);
        if (f.length) {
            for (var g = 0; e = f[g++];) {
                var h = q.createTextNode(e.value);
                e.expr && (e.type = "text", e.element = h, e.filters = e.filters.replace(sb, function () {
                    e.type = "html";
                    e.group = 1;
                    return ""
                }), d.push(e));
                Y.appendChild(h)
            }
            b.parentNode.replaceChild(Y, b);
            d.length && Da(d, c)
        }
    }

    function vb(b) {
        return b.replace(/([a-z\d])([A-Z]+)/g, "$1-$2").toLowerCase()
    }

    function oa(b) {
        return 0 > b.indexOf("-") && 0 > b.indexOf("_") ? b : b.replace(/[-_][^-_]/g, function (b) {
            return b.charAt(1).toUpperCase()
        })
    }

    function wb(b) {
        if (!("classList"in b)) {
            b.classList = {node: b};
            for (var c in xb)b.classList[c.slice(1)] = xb[c]
        }
        return b.classList
    }

    function yb(b) {
        try {
            if ("object" === typeof b)return b;
            b = "true" === b ? !0 : "false" === b ? !1 : "null" === b ? null : +b + "" === b ? +b : uc.test(b) ? avalon.parseJSON(b) : b
        } catch (c) {
        }
        return b
    }

    function zb(b, c) {
        if (0 >= b.offsetWidth) {
            if (vc.test(w["@:get"](b, "display"))) {
                var d = {node: b},
                    e;
                for (e in Ab)d[e] = b.style[e], b.style[e] = Ab[e];
                c.push(d)
            }
            (d = b.parentNode) && 1 === d.nodeType && zb(d, c)
        }
    }

    function wc(b, c, d, e) {
        for (var f = [], g = " = " + d + ".", h = b.length, k; k = b[--h];)c.hasOwnProperty(k) && (f.push(k + g + k), e.vars.push(k), "duplex" === e.type && (b.get = d + "." + k), b.splice(h, 1));
        return f
    }

    function Bb(b) {
        for (var c = [], d = {}, e = 0; e < b.length; e++) {
            var f = b[e], g = f && "string" === typeof f.$id ? f.$id : f;
            d[g] || (d[g] = c.push(f))
        }
        return c
    }

    function xc(b, c) {
        c = c.replace(yc, "").replace(zc, function () {
            return "],|"
        }).replace(Ac, function (b,
                                 c) {
            return "[" + Cb(c)
        }).replace(Bc, function () {
            return '"],["'
        }).replace(Cc, function () {
            return '",'
        }) + "]";
        return "return avalon.filters.$filter(" + b + ", " + c + ")"
    }

    function Db(b, c, d) {
        var e = d.type, f = d.filters || "", g = c.map(function (b) {
                return String(b.$id).replace(Dc, "$1")
            }) + b + e + f, h = Ec(b).concat(), k = [], l = [], m = [], n = "";
        c = Bb(c);
        d.vars = [];
        for (var n = 0, p = c.length; n < p; n++)if (h.length) {
            var s = "vm" + D + "_" + n;
            l.push(s);
            m.push(c[n]);
            k.push.apply(k, wc(h, c[n], s, d))
        }
        if (k.length || "duplex" !== e)if ("duplex" !== e && (-1 < b.indexOf("||") || -1 <
            b.indexOf("&&")) && d.vars.forEach(function (c) {
                b = b.replace(RegExp("\\b" + c + "(?:\\.\\w+|\\[\\w+\\])+", "ig"), function (d, e) {
                    var f = d.charAt(c.length), g = R ? b.slice(e + d.length) : RegExp.rightContext, g = /^\s*\(/.test(g);
                    if ("." === f || "[" === f || g) {
                        f = "var" + String(Math.random()).replace(/^0\./, "");
                        if (g) {
                            g = d.split(".");
                            if (2 < g.length) {
                                var h = g.pop();
                                k.push(f + " = " + g.join("."));
                                return f + "." + h
                            }
                            return d
                        }
                        k.push(f + " = " + d);
                        return f
                    }
                    return d
                })
            }), d.args = m, c = Ga[g])d.evaluator = c; else {
            (n = k.join(", ")) && (n = "var " + n);
            if (/\S/.test(f)) {
                if (!/text|html/.test(d.type))throw Error("ms-" +
                d.type + "\u4e0d\u652f\u6301\u8fc7\u6ee4\u5668");
                b = "\nvar ret" + D + " = " + b + ";\r\n";
                b += xc("ret" + D, f)
            } else {
                if ("duplex" === e) {
                    e = "'use strict';\nreturn function(vvv){\n\t" + n + ";\n\tif(!arguments.length){\n\t\treturn " + b + "\n\t}\n\t" + (!Fc.test(b) ? h.get : b) + "= vvv;\n} ";
                    try {
                        c = Function.apply(z, l.concat(e)), d.evaluator = Ga(g, c)
                    } catch (F) {
                        x("debug: parse error," + F.message)
                    }
                    return
                }
                "on" === e ? (b = -1 === b.indexOf("(") ? b + ".call(this, $event)" : b.replace("(", ".call(this,"), l
            .
                push("$event"), b = "\nreturn " + b + ";", f = b.lastIndexOf("\nreturn"),
                    e = b.slice(0, f), f = b.slice(f), b = e + "\n" + f
            ):
                b = "\nreturn " + b + ";"
            }
            try {
                c = Function.apply(z, l.concat("'use strict';\n" + n + b)), d.evaluator = Ga(g, c)
            } catch (ta) {
                x("debug: parse error," + ta.message)
            } finally {
                h = textBuffer = l = null
            }
        }
    }

    function J(b, c, d, e, f) {
        Array.isArray(e) && (b = e.map(function (b) {
            return b.expr ? "(" + b.value + ")" : Cb(b.value)
        }).join(" + "));
        Db(b, c, d);
        d.evaluator && !f && (d.handler = E[d.handlerName || d.type], Ba(d))
    }

    function fa(b, c) {
        var d = "_" + b;
        if (!fa[d]) {
            var e = q.createElement(b);
            B.appendChild(e);
            c = y ? getComputedStyle(e,
                null).display : e.currentStyle.display;
            B.removeChild(e);
            fa[d] = c
        }
        return fa[d]
    }

    function Ha(b) {
        return null == b ? "" : b
    }

    function Gc(b, c, d, e) {
        c.param.replace(/\w+/g, function (e) {
            (e = avalon.duplexHooks[e]) && "function" === typeof e[d] && (b = e[d](b, c))
        });
        return b
    }

    function Hc() {
        for (var b = ga.length - 1; 0 <= b; b--)!1 === (0, ga[b])() && ga.splice(b, 1);
        ga.length || clearInterval(Eb)
    }

    function Fb(b, c, d, e) {
        var f = b.template.cloneNode(!0), g = avalon.slice(f.childNodes);
        d.$stamp && f.insertBefore(d.$stamp, f.firstChild);
        c.appendChild(f);
        b = [d].concat(b.vmodels);
        e.push({nodes: g, vmodels: b})
    }

    function Gb(b, c) {
        var d = b.proxies[c];
        return d ? d.$stamp : b.element
    }

    function Ia(b, c, d) {
        for (; ;) {
            var e = c.previousSibling;
            if (!e)break;
            e.parentNode.removeChild(e);
            d && d.call(e);
            if (e === b)break
        }
    }

    function Ic(b) {
        var c = {$host: [], $outer: {}, $stamp: 1, $index: 0, $first: !1, $last: !1, $remove: avalon.noop};
        c[b] = {
            get: function () {
                return this.$host[this.$index]
            }, set: function (b) {
                this.$host.set(this.$index, b)
            }
        };
        var c = M(c, {$last: 1, $first: 1, $index: 1}), d = c.$events;
        d[b] = d.$first = d.$last = d.$index;
        c.$id = N("$proxy$each");
        return c
    }

    function Jc(b, c) {
        for (var d = c.param || "el", e, f = 0, g = pa.length; f < g; f++) {
            var h = pa[f];
            h && h.hasOwnProperty(d) && (e = h, pa.splice(f, 1))
        }
        e || (e = Ic(d));
        var k = c.$repeat, d = k.length - 1;
        e.$index = b;
        e.$first = 0 === b;
        e.$last = b === d;
        e.$host = k;
        e.$outer = c.$outer;
        e.$stamp = c.clone.cloneNode(!1);
        e.$remove = function () {
            return k.removeAt(e.$index)
        };
        return e
    }

    function Kc() {
        var b = M({
            $key: "", $outer: {}, $host: {}, $val: {
                get: function () {
                    return this.$host[this.$key]
                }, set: function (b) {
                    this.$host[this.$key] = b
                }
            }
        }, {$val: 1});
        b.$id = N("$proxy$with");
        return b
    }

    function Lc(b, c) {
        var d = Hb.pop();
        d || (d = Kc());
        var e = c.$repeat;
        d.$key = b;
        d.$host = e;
        d.$outer = c.$outer;
        e.$events ? d.$events.$val = e.$events[b] : d.$events = {};
        return d
    }

    function ya(b, c) {
        var d = "each" === c ? pa : Hb;
        avalon.each(b, function (b, c) {
            if (c.$events) {
                for (var g in c.$events)Array.isArray(c.$events[g]) && (c.$events[g].forEach(function (b) {
                    "object" === typeof b && fb(b)
                }), c.$events[g].length = 0);
                c.$host = c.$outer = {};
                d.unshift(c) > u.maxRepeatSize && d.pop()
            }
        });
        "each" === c && (b.length = 0)
    }

    function Ib(b, c, d, e) {
        b = (b + "").replace(/[^0-9+\-Ee.]/g,
            "");
        b = !isFinite(+b) ? 0 : +b;
        c = !isFinite(+c) ? 0 : Math.abs(c);
        e = "undefined" === typeof e ? "," : e;
        d = "undefined" === typeof d ? "." : d;
        var f = "", f = function (b, c) {
            var d = Math.pow(10, c);
            return "" + (Math.round(b * d) / d).toFixed(c)
        }, f = (c ? f(b, c) : "" + Math.round(b)).split(".");
        3 < f[0].length && (f[0] = f[0].replace(/\B(?=(?:\d{3})+(?!\d))/g, e));
        if ((f[1] || "").length < c)f[1] = f[1] || "", f[1] += Array(c - f[1].length + 1).join("0");
        return f.join(d)
    }

    function U() {
        q.body && (C ? (t["ready!"].state = 2, C.checkDeps()) : Jb.forEach(function (b) {
            b(avalon)
        }), U = z)
    }

    function Kb() {
        try {
            B.doScroll("left"), U()
        } catch (b) {
            setTimeout(Kb)
        }
    }

    var D = new Date - 0, q = r.document, I = q.getElementsByTagName("head")[0], ha = I.insertBefore(document.createElement("avalon"), I.firstChild);
    ha.innerHTML = "X<style id='avalonStyle'>.avalonHide{ display: none!important }</style>";
    ha.setAttribute("ms-skip", "1");
    var Lb = /\[native code\]/, G = "$" + D, Mc = r.require, Nc = r.define, ua = !1, A = /[^, ]+/g, db = /^(?:object|array)$/, Ja = /^\[object SVG\w*Element\]$/, Zb = /^\[object (?:Window|DOMWindow|global)\]$/, Ka = Object.prototype,
        L = Ka.hasOwnProperty, aa = Ka.toString, K = Array.prototype, la = K.slice, da = {}, y = r.dispatchEvent, B = q.documentElement, Y = q.createDocumentFragment(), ia = q.createElement("div"), Mb = {};
    "Boolean Number String Function Array Date RegExp Object Error".replace(A, function (b) {
        Mb["[object " + b + "]"] = b.toLowerCase()
    });
    var N = function (b) {
        return ((b || "avalon") + Math.random() + Math.random()).replace(/0\./g, "")
    }, R = function () {
        if (r.VBArray) {
            var b = document.documentMode;
            return b ? b : r.XMLHttpRequest ? 7 : 6
        }
        return 0
    }();
    avalon = function (b) {
        return new avalon.init(b)
    };
    avalon.init = function (b) {
        this[0] = this.element = b
    };
    avalon.fn = avalon.prototype = avalon.init.prototype;
    avalon.type = function (b) {
        return null == b ? String(b) : "object" === typeof b || "function" === typeof b ? Mb[aa.call(b)] || "object" : typeof b
    };
    var T = "object" === typeof alert ? function (b) {
        try {
            return /^\s*\bfunction\b/.test(b + "")
        } catch (c) {
            return !1
        }
    } : function (b) {
        return "[object Function]" == aa.call(b)
    };
    avalon.isFunction = T;
    avalon.isWindow = function (b) {
        return !b ? !1 : b == b.document && b.document != b
    };
    Ya(r) && (avalon.isWindow = Ya);
    for (var Oc in avalon({}))break;
    var Pc = "0" !== Oc;
    avalon.isPlainObject = function (b, c) {
        if (!b || "object" !== avalon.type(b) || b.nodeType || avalon.isWindow(b))return !1;
        try {
            if (b.constructor && !L.call(b, "constructor") && !L.call(b.constructor.prototype, "isPrototypeOf"))return !1
        } catch (d) {
            return !1
        }
        if (Pc)for (c in b)return L.call(b, c);
        for (c in b);
        return void 0 === c || L.call(b, c)
    };
    Lb.test(Object.getPrototypeOf) && (avalon.isPlainObject = function (b) {
        return "[object Object]" === aa.call(b) && Object.getPrototypeOf(b) === Ka
    });
    avalon.mix = avalon.fn.mix = function () {
        var b,
            c, d, e, f, g = arguments[0] || {}, h = 1, k = arguments.length, l = !1;
        "boolean" === typeof g && (l = g, g = arguments[1] || {}, h++);
        "object" !== typeof g && !T(g) && (g = {});
        h === k && (g = this, h--);
        for (; h < k; h++)if (null != (b = arguments[h]))for (c in b) {
            d = g[c];
            try {
                e = b[c]
            } catch (m) {
                continue
            }
            g !== e && (l && e && (avalon.isPlainObject(e) || (f = Array.isArray(e))) ? (f ? (f = !1, d = d && Array.isArray(d) ? d : []):d= d && avalon.isPlainObject(d) ? d : {}, g[c] = avalon.mix(l, d, e)) : void 0 !== e && (g[c] = e))
        }
        return g
    };
    avalon.mix({
        rword: A, subscribers: G, version: 1.39, ui: {}, log: x, slice: y ?
            function (b, c, d) {
                return la.call(b, c, d)
            } : function (b, c, d) {
            var e = [], f = b.length;
            void 0 === d && (d = f);
            if ("number" === typeof d && isFinite(d)) {
                c = Za(c, f);
                d = Za(d, f);
                for (f = c; f < d; ++f)e[f - c] = b[f]
            }
            return e
        }, noop: z, error: function (b, c) {
            throw new (c || Error)(b);
        }, oneObject: S, range: function (b, c, d) {
            d || (d = 1);
            null == c && (c = b || 0, b = 0);
            var e = -1;
            c = Math.max(0, Math.ceil((c - b) / d));
            for (var f = Array(c); ++e < c;)f[e] = b, b += d;
            return f
        }, eventHooks: {}, bind: function (b, c, d, e) {
            var f = avalon.eventHooks[c];
            "object" === typeof f && (c = f.type, f.deel && (d =
                f.deel(b, d)));
            f = y ? d : function (c) {
                d.call(b, $b(c))
            };
            y ? b.addEventListener(c, f, !!e) : b.attachEvent("on" + c, f);
            return f
        }, unbind: function (b, c, d, e) {
            var f = avalon.eventHooks[c];
            d = d || z;
            "object" === typeof f && (c = f.type);
            y ? b.removeEventListener(c, d, !!e) : b.detachEvent("on" + c, d)
        }, css: function (b, c, d) {
            b instanceof avalon && (b = b[0]);
            var e = /[_-]/.test(c) ? oa(c) : c;
            c = avalon.cssName(e) || e;
            if (void 0 === d || "boolean" === typeof d)return e = w[e + ":get"] || w["@:get"], "background" === c && (c = "backgroundColor"), b = e(b, c), !0 === d ? parseFloat(b) ||
            0 : b;
            "" === d ? b.style[c] = "" : null == d || d !== d || (isFinite(d) && !avalon.cssNumber[e] && (d += "px"), e = w[e + ":set"] || w["@:set"], e(b, c, d))
        }, each: function (b, c) {
            if (b) {
                var d = 0, e;
                a:{
                    if (b && "object" === typeof b) {
                        var f = b.length;
                        if (f === f >>> 0)try {
                            e = !1 === {}.propertyIsEnumerable.call(b, "length") ? Array.isArray(b) || /^\s?function/.test(b.item || b.callee) : !0;
                            break a
                        } catch (g) {
                            e = !0;
                            break a
                        }
                    }
                    e = !1
                }
                if (e)for (e = b.length; d < e; d++)c(d, b[d]); else for (d in b)b.hasOwnProperty(d) && c(d, b[d])
            }
        }, getWidgetData: function (b, c) {
            var d = avalon(b).data(),
                e = {}, f;
            for (f in d)0 === f.indexOf(c) && (e[f.replace(c, "").replace(/\w/, function (b) {
                return b.toLowerCase()
            })] = d[f]);
            return e
        }, Array: {
            ensure: function (b, c) {
                if (-1 === b.indexOf(c))return b.push(c)
            }, removeAt: function (b, c) {
                return !!b.splice(c, 1).length
            }, remove: function (b, c) {
                var d = b.indexOf(c);
                return ~d ? avalon.Array.removeAt(b, d) : !1
            }
        }
    });
    var v = avalon.bindingHandlers = {}, E = avalon.bindingExecutors = {};
    avalon.nextTick = r.setImmediate ? setImmediate.bind(r) : function (b) {
        setTimeout(b, 0)
    };
    if (!"\u53f8\u5f92\u6b63\u7f8e".trim) {
        var Qc =
            /^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g;
        String.prototype.trim = function () {
            return this.replace(Qc, "")
        }
    }
    var Rc = !{toString: null}.propertyIsEnumerable("toString"), Sc = function () {
    }.propertyIsEnumerable("prototype"), Nb = "toString toLocaleString valueOf hasOwnProperty isPrototypeOf propertyIsEnumerable constructor".split(" "), Tc = Nb.length;
    Object.keys || (Object.keys = function (b) {
        var c = [], d = Sc && "function" === typeof b;
        if ("string" === typeof b || b && b.callee)for (d = 0; d < b.length; ++d)c.push(String(d)); else for (var e in b)!(d &&
        "prototype" === e) && L.call(b, e) && c.push(String(e));
        if (Rc) {
            d = (d = b.constructor) && d.prototype === b;
            for (e = 0; e < Tc; e++) {
                var f = Nb[e];
                !(d && "constructor" === f) && L.call(b, f) && c.push(f)
            }
        }
        return c
    });
    Array.isArray || (Array.isArray = function (b) {
        return "[object Array]" === aa.call(b)
    });
    z.bind || (Function.prototype.bind = function (b) {
        if (2 > arguments.length && void 0 === b)return this;
        var c = this, d = arguments;
        return function () {
            var e = [], f;
            for (f = 1; f < d.length; f++)e.push(d[f]);
            for (f = 0; f < arguments.length; f++)e.push(arguments[f]);
            return c.apply(b,
                e)
        }
    });
    Lb.test([].map) || avalon.mix(K, {
        indexOf: function (b, c) {
            var d = this.length, e = ~~c;
            for (0 > e && (e += d); e < d; e++)if (this[e] === b)return e;
            return -1
        },
        lastIndexOf: function (b, c) {
            var d = this.length, e = null == c ? d - 1 : c;
            for (0 > e && (e = Math.max(0, d + e)); 0 <= e; e--)if (this[e] === b)return e;
            return -1
        },
        forEach: ba("", "_", ""),
        filter: ba("r=[],j=0,", "if(_)r[j++]=this[i]", "return r"),
        map: ba("r=[],", "r[i]=_", "return r"),
        some: ba("", "if(_)return true", "return false"),
        every: ba("", "if(!_)return false", "return true")
    });
    avalon.contains = $a;
    B.contains || (Node.prototype.contains = function (b) {
        return !!(this.compareDocumentPosition(b) & 16)
    });
    q.contains || (q.contains = function (b) {
        return $a(q, b)
    });
    if (r.SVGElement) {
        var Ob = q.createElementNS("http://www.w3.org/2000/svg", "svg");
        Ob.innerHTML = '<circle cx="50" cy="50" r="40" fill="red" />';
        if (!Ja.test(Ob.firstChild)) {
            var La = function (b, c) {
                if (b && b.childNodes)for (var d = b.childNodes, e = 0, f; f = d[e++];)if (f.tagName) {
                    var g = q.createElementNS("http://www.w3.org/2000/svg", f.tagName.toLowerCase());
                    K.forEach.call(f.attributes,
                        function (b) {
                            g.setAttribute(b.name, b.value)
                        });
                    La(f, g);
                    c.appendChild(g)
                }
            };
            Object.defineProperties(SVGElement.prototype, {
                outerHTML: {
                    enumerable: !0, configurable: !0, get: ab, set: function (b) {
                        var c = this.tagName.toLowerCase(), d = this.parentNode;
                        b = avalon.parseHTML(b);
                        "svg" === c ? d.insertBefore(b, this) : (c = q.createDocumentFragment(), La
                        (b, c), d.insertBefore(c, this)
                        )
                        ;
                        d.removeChild(this)
                    }
                }, innerHTML: {
                    enumerable: !0, configurable: !0, get: function () {
                        var b = RegExp("</" + this.nodeName + ">$", "i");
                        return this.outerHTML.replace(RegExp("<" +
                        this.nodeName + '\\b(?:(["\'])[^"]*?(\\1)|[^>])*>', "i"), "").replace(b, "")
                    }, set: function (b) {
                        avalon.clearHTML && (avalon.clearHTML(this), b = avalon.parseHTML(b), La(b, this))
                    }
                }
            })
        }
    }
    !B.outerHTML && r.HTMLElement && HTMLElement.prototype.__defineGetter__("outerHTML", ab);
    var ac = /^(?:mouse|contextmenu|drag)|click/, ja = avalon.eventHooks;
    "onmouseenter"in B || avalon.each({mouseenter: "mouseover", mouseleave: "mouseout"}, function (b, c) {
        ja[b] = {
            type: c, deel: function (c, e) {
                return function (f) {
                    var g = f.relatedTarget;
                    if (!g || g !== c && !(c.compareDocumentPosition(g) &
                        16))return delete f.type, f.type = b, e.call(c, f)
                }
            }
        }
    });
    avalon.each({AnimationEvent: "animationend", WebKitAnimationEvent: "webkitAnimationEnd"}, function (b, c) {
        r[b] && !ja.animationend && (ja.animationend = {type: c})
    });
    "oninput"in q.createElement("input") || (ja.input = {
        type: "propertychange", deel: function (b, c) {
            return function (d) {
                if ("value" === d.propertyName)return d.type = "input", c.call(b, d)
            }
        }
    });
    if (void 0 === q.onmousewheel) {
        var Pb = void 0 !== q.onwheel ? "wheel" : "DOMMouseScroll", Uc = "wheel" === Pb ? "deltaY" : "detail";
        ja.mousewheel =
        {
            type: Pb, deel: function (b, c) {
            return function (d) {
                d.wheelDeltaY = d.wheelDelta = 0 < d[Uc] ? -120 : 120;
                d.wheelDeltaX = 0;
                Object.defineProperty && Object.defineProperty(d, "type", {value: "mousewheel"});
                c.call(b, d)
            }
        }
        }
    }
    var O, P, ea, Qb, tb, Rb = /[-.*+?^${}()|[\]\/\\]/g, C = z, V = {
        loader: function (b) {
            r.define = b ? C.define : Nc;
            r.require = b ? C : Mc
        }, interpolate: function (b) {
            O = b[0];
            P = b[1];
            if (O === P)throw new SyntaxError("openTag!==closeTag");
            if ("\x3c!--,--\x3e" === b + "")u.commentInterpolate = !0; else {
                b = O + "test" + P;
                ia.innerHTML = b;
                if (ia.innerHTML !==
                    b && -1 < ia.innerHTML.indexOf("&lt;"))throw new SyntaxError("\u6b64\u5b9a\u754c\u7b26\u4e0d\u5408\u6cd5");
                ia.innerHTML = ""
            }
            b = (O + "").replace(Rb, "\\$&");
            var c = (P + "").replace(Rb, "\\$&");
            ea = RegExp(b + "(.*?)" + c);
            Qb = RegExp(b + "(.*?)" + c, "g");
            tb = RegExp(b + ".*?" + c + "|\\sms-")
        }
    };
    u.debug = !0;
    u.plugins = V;
    u.plugins.interpolate(["{{", "}}"]);
    u.paths = {};
    u.shim = {};
    u.maxRepeatSize = 100;
    avalon.config = u;
    var W = {
        $watch: function (b, c) {
            if ("function" === typeof c) {
                var d = this.$events[b];
                d ? d.push(c) : this.$events[b] = [c]
            } else this.$events =
                this.$watch.backup;
            return this
        }, $unwatch: function (b, c) {
            var d = arguments.length;
            if (0 === d)this.$watch.backup = this.$events, this.$events = {}; else if (1 === d)this.$events[b] = []; else for (var d = this.$events[b] || [], e = d.length; 0 > ~--e;)if (d[e] === c)return d.splice(e, 1);
            return this
        }, $fire: function (b) {
            var c;
            /^(\w+)!(\S+)$/.test(b) && (c = RegExp.$1, b = RegExp.$2);
            var d = this.$events, e = la.call(arguments, 1), f = [b].concat(e);
            if ("all" === c)for (var g in avalon.vmodels) {
                var h = avalon.vmodels[g];
                h !== this && h.$fire.apply(h, f)
            } else if ("up" ===
                c || "down" === c) {
                var k = d.expr ? Sb(d.expr) : [];
                if (0 !== k.length) {
                    for (g in avalon.vmodels)h = avalon.vmodels[g], h !== this && h.$events.expr && (e = Sb(h.$events.expr), 0 !== e.length && Array.prototype.forEach.call(e, function (b) {
                        Array.prototype.forEach.call(k, function (d) {
                            if ("down" === c ? d.contains(b) : b.contains(d))b._avalon = h
                        })
                    }));
                    g = q.getElementsByTagName("*");
                    var l = [];
                    Array.prototype.forEach.call(g, function (b) {
                        b._avalon && (l.push(b._avalon), b._avalon = "", b.removeAttribute("_avalon"))
                    });
                    "up" === c && l.reverse();
                    for (g = 0; (e = l[g++]) &&
                    !1 !== e.$fire.apply(e, f););
                }
            } else {
                f = d[b] || [];
                d = d.$all || [];
                g = 0;
                for (var m; m = f[g++];)T(m) && m.apply(this, e);
                for (g = 0; m = d[g++];)T(m) && m.apply(this, arguments)
            }
        }
    }, Vc = /(\w+)\[(avalonctrl)="(\S+)"\]/, Sb = q.querySelectorAll ? function (b) {
        return q.querySelectorAll(b)
    } : function (b) {
        b = b.match(Vc);
        for (var c = q.getElementsByTagName(b[1]), d = [], e = 0, f; f = c[e++];)f.getAttribute(b[2]) === b[3] && d.push(f);
        return d
    }, Tb = avalon.vmodels = {};
    avalon.define = function (b, c) {
        var d = b.$id || b;
        d || x("warning: vm\u5fc5\u987b\u6307\u5b9a$id");
        Tb[d] &&
        x("warning: " + d + " \u5df2\u7ecf\u5b58\u5728\u4e8eavalon.vmodels\u4e2d");
        if ("object" === typeof b)var e = M(b); else e = {$watch: z}, c(e), e = M(e), ua = !0, c(e), ua = !1;
        e.$id = d;
        return Tb[d] = e
    };
    var ra = "$id,$watch,$unwatch,$fire,$events,$model,$skipArray".match(A), sa = {}, Ma = Object.defineProperty, xa = !0;
    try {
        Ma({}, "_", {value: "x"});
        var wa = Object.defineProperties
    } catch (Cd) {
        xa = !1
    }
    var cb = Object.is || function (b, c) {
            return 0 === b && 0 === c ? 1 / b === 1 / c : b !== b ? c !== c : b === c
        }, gc = y ? function (b) {
        var c = {}, d;
        for (d in b)c[d] = {
            get: b[d], set: b[d],
            enumerable: !0, configurable: !0
        };
        return c
    } : function (b) {
        return b
    };
    if (!xa && ("__defineGetter__"in avalon && (Ma = function (b, c, d) {
            "value"in d && (b[c] = d.value);
            "get"in d && b.__defineGetter__(c, d.get);
            "set"in d && b.__defineSetter__(c, d.set);
            return b
        }, wa = function (b, c) {
            for (var d in c)c.hasOwnProperty(d) && Ma(b, d, c[d]);
            return b
        }), R)) {
        r.execScript('Function parseVB(code)\n\tExecuteGlobal(code)\nEnd Function\nDim VBClassBodies\nSet VBClassBodies=CreateObject("Scripting.Dictionary")\nFunction findOrDefineVBClass(name,body)\n\tDim found\n\tfound=""\n\tFor Each key in VBClassBodies\n\t\tIf body=VBClassBodies.Item(key) Then\n\t\t\tfound=key\n\t\t\tExit For\n\t\tEnd If\n\tnext\n\tIf found="" Then\n\t\tparseVB("Class " + name + body)\n\t\tVBClassBodies.Add name, body\n\t\tfound=name\n\tEnd If\n\tfindOrDefineVBClass=found\nEnd Function',
            "VBScript");
        var Wc = function (b, c, d, e) {
            var f = c[d];
            if (4 === arguments.length)f.call(b, e); else return f.call(b)
        }, wa = function (b, c, d) {
            var e = "VBClass" + setTimeout("1"), f = [];
            f.push("\r\n\tPrivate [__data__], [__proxy__]", "\tPublic Default Function [__const__](d, p)", "\t\tSet [__data__] = d: set [__proxy__] = p", "\t\tSet [__const__] = Me", "\tEnd Function");
            for (b in d)c.hasOwnProperty(b) || f.push("\tPublic [" + b + "]");
            ra.forEach(function (b) {
                c.hasOwnProperty(b) || f.push("\tPublic [" + b + "]")
            });
            f.push("\tPublic [hasOwnProperty]");
            for (b in c)f.push("\tPublic Property Let [" + b + "](val" + D + ")", '\t\tCall [__proxy__](Me,[__data__], "' + b + '", val' + D + ")", "\tEnd Property", "\tPublic Property Set [" + b + "](val" + D + ")", '\t\tCall [__proxy__](Me,[__data__], "' + b + '", val' + D + ")", "\tEnd Property", "\tPublic Property Get [" + b + "]", "\tOn Error Resume Next", "\t\tSet[" + b + '] = [__proxy__](Me,[__data__],"' + b + '")', "\tIf Err.Number <> 0 Then", "\t\t[" + b + '] = [__proxy__](Me,[__data__],"' + b + '")', "\tEnd If", "\tOn Error Goto 0", "\tEnd Property");
            f.push("End Class");
            b = f.join("\r\n");
            b = r.findOrDefineVBClass(e, b);
            b === e && r.parseVB(["Function " + e + "Factory(a, b)", "\tDim o", "\tSet o = (New " + e + ")(a, b)", "\tSet " + e + "Factory = o", "End Function"].join("\r\n"));
            return r[b + "Factory"](c, Wc)
        }
    }
    var za = K.splice, eb = {
        _splice: za, _fire: function (b, c, d) {
            for (var e = this.$events[G], f = 0, g; g = e[f++];)g.$repeat && g.handler.call(g, b, c, d)
        }, size: function () {
            return this._.length
        }, pushArray: function (b) {
            var c = b.length, d = this.length;
            c && (K.push.apply(this.$model, b), X.call(this, "add", d, c, d));
            return c +
                d
        }, push: function () {
            var b, c = arguments.length;
            for (b = 0; b < c; b++);
            return this.pushArray(arguments)
        }, unshift: function () {
            var b = arguments.length, c = this.length;
            b && (K.unshift.apply(this.$model, arguments), X.call(this, "add", 0, b, 0));
            return b + c
        }, shift: function () {
            if (this.length) {
                var b = this.$model.shift();
                X.call(this, "del", 0, 1, 0);
                return b
            }
        }, pop: function () {
            var b = this.length;
            if (b) {
                var c = this.$model.pop();
                X.call(this, "del", b - 1, 1, Math.max(0, b - 2));
                return c
            }
        }, splice: function (b) {
            var c = arguments.length, d = [], e, f = za.apply(this.$model,
                arguments);
            f.length && (d.push("del", b, f.length, 0), e = !0);
            2 < c && (d.splice(3, 1, 0, "add", b, c - 2), e = !0);
            return e ? X.apply(this, d) : []
        }, contains: function (b) {
            return -1 !== this.indexOf(b)
        }, remove: function (b) {
            return this.removeAt(this.indexOf(b))
        }, removeAt: function (b) {
            return 0 <= b ? (this.$model.splice(b, 1), X.call(this, "del", b, 1, 0)) : []
        }, clear: function () {
            this.$model.length = this.length = this._.length = 0;
            this._fire("clear", 0);
            return this
        }, removeAll: function (b) {
            if (Array.isArray(b))b.forEach(function (b) {
                this.remove(b)
            }, this);
            else if ("function" === typeof b)for (var c = this.length - 1; 0 <= c; c--)b(this[c], c) && this.removeAt(c); else this.clear()
        }, ensure: function (b) {
            this.contains(b) || this.push(b);
            return this
        }, set: function (b, c) {
            if (0 <= b) {
                var d = avalon.type(c);
                c && c.$model && (c = c.$model);
                var e = this[b];
                if ("object" === d)for (var f in c)e.hasOwnProperty(f) && (e[f] = c[f]); else"array" === d ? e.clear().push.apply(e, c) : e !== c && (this[b] = c, this.$model[b] = c, this._fire("set", b, c))
            }
            return this
        }
    };
    "sort,reverse".replace(A, function (b) {
        eb[b] = function () {
            var c =
                this.$model, d = c.concat(), e = Math.random(), f = [], g;
            K[b].apply(c, arguments);
            for (var h = 0, k = d.length; h < k; h++) {
                var l = c[h];
                cb(l, d[h]) ? f.push(h) : (g = d.indexOf(l), f
            .
                push(g), d[g] = e, g = !0
            )
            }
            g && (Aa(this, f), this._fire("move", f), this._fire("index", 0));
            return this
        }
    });
    var hc = /^(duplex|on)$/, Q = avalon.$$subscribers = [], ib = new Date, hb = {}, H = {
        area: [1, "<map>"],
        param: [1, "<object>"],
        col: [2, "<table><tbody></tbody><colgroup>", "</table>"],
        legend: [1, "<fieldset>"],
        option: [1, "<select multiple='multiple'>"],
        thead: [1, "<table>", "</table>"],
        tr: [2, "<table><tbody>", "</tbody></table>"],
        th: [3, "<table><tbody><tr>", "</tr></tbody></table>"],
        td: [3, "<table><tbody><tr>"],
        g: [1, '<svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" version="1.1">', "</svg>"],
        _default: y ? [0, ""] : [1, "X<div>"]
    };
    H.optgroup = H.option;
    H.tbody = H.tfoot = H.colgroup = H.caption = H.thead;
    "circle,defs,ellipse,image,line,path,polygon,polyline,rect,symbol,text,use".replace(A, function (b) {
        H[b] = H.g
    });
    var Xc = /<([\w:]+)/, Yc = /<(?!area|br|col|embed|hr|img|input|link|meta|param)(([\w:]+)[^>]*)\/>/ig,
        Ub = y ? /[^\d\D]/ : /(<(?:script|link|style|meta|noscript))/ig, Zc = S(["", "text/javascript", "text/ecmascript", "application/ecmascript", "application/javascript"]), $c = /<(?:tb|td|tf|th|tr|col|opt|leg|cap|area)/, ad = q.createElement("script");
    avalon.parseHTML = function (b) {
        "string" !== typeof b && (b += "");
        b = b.replace(Yc, "<$1></$2>").trim();
        var c = (Xc.exec(b) || ["", ""])[1].toLowerCase(), d = H[c] || H._default, c = Y.cloneNode(!1), e = ia, f;
        y || (b = b.replace(Ub, "<br class=msNoScope>$1"));
        e.innerHTML = d[1] + b + (d[2] || "");
        b = e.getElementsByTagName("script");
        if (b.length)for (var g = 0, h; h = b[g++];)Zc[h.type] && (f = ad.cloneNode(!1), K.forEach.call(h.attributes, function (b) {
            b && b.specified && (f[b.name] = b.value, f.setAttribute(b.name, b.value))
        }), f.text = h.text, h.parentNode.replaceChild(f, h));
        for (g = d[0]; g--; e = e.lastChild);
        if (!y) {
            b = e.getElementsByTagName("br");
            for (d = b.length; h = b[--d];)"msNoScope" === h.className && h.parentNode.removeChild(h);
            b = e.all;
            for (g = 0; h = b[g++];)jb(h) && jc(h)
        }
        for (; d = e.firstChild;)c.appendChild(d);
        return c
    };
    avalon.innerHTML = function (b, c) {
        if (!y && !Ub.test(c) && !$c.test(c))try {
            b.innerHTML = c;
            return
        } catch (d) {
        }
        var e = this.parseHTML(c);
        this.clearHTML(b).appendChild(e)
    };
    avalon.clearHTML = function (b) {
        for (b.textContent = ""; b.firstChild;)b.removeChild(b.firstChild);
        return b
    };
    avalon.scan = function (b, c, d) {
        b = b || B;
        c = c ? [].concat(c) : [];
        lb(b, c)
    };
    var qc = S("AREA,BASE,BASEFONT,BR,COL,COMMAND,EMBED,HR,IMG,INPUT,LINK,META,PARAM,SOURCE,TRACK,WBR,NOSCRIPT,SCRIPT,STYLE,TEXTAREA"), ka = function (b, c, d) {
            if (b = b.getAttribute(c)) {
                c = 0;
                for (var e; e = d[c++];)if (e.hasOwnProperty(b) && "function" === typeof e[b])return e[b]
            }
        }, ub = R && r.MutationObserver ? function (b) {
            for (var c = b.firstChild, d; c;) {
                var e = c.nextSibling;
                3 === c.nodeType ? d ? (d.nodeValue += c.nodeValue, b.removeChild(c)) : d = c : d = null;
                c = e
            }
        } : 0, qb = /ms-(\w+)-?(.*)/, rb = {
            "if": 10,
            repeat: 90,
            data: 100,
            widget: 110,
            each: 1400,
            "with": 1500,
            duplex: 2E3,
            on: 3E3
        }, mc = S("animationend,blur,change,input,click,dblclick,focus,keydown,keypress,keyup,mousedown,mouseenter,mouseleave,mousemove,mouseout,mouseover,mouseup,scan,scroll,submit"), nc = S("value,title,alt,checked,selected,disabled,readonly,enabled"),
        oc = /^if|widget|repeat$/, pc = /^each|with|html|include$/;
    if (!"1"[0])var Na = qa(512), bd = /\s+(ms-[^=\s]+)(?:=("[^"]*"|'[^']*'|[^\s>]+))?/g, cd = /^['"]/, dd = /<\w+\b(?:(["'])[^"]*?(\1)|[^>])*>/i, ed = /&amp;/g, pb = function (b) {
        b = b.outerHTML;
        if ("</" === b.slice(0, 2) || !b.trim())return [];
        b = b.match(dd)[0];
        var c = [], d, e;
        if (Na[b])return Na[b];
        for (; d = bd.exec(b);)(e = d[2]) && (e = (cd.test(e) ? e.slice(1, -1) : e).replace(ed, "&")), d = d[1].toLowerCase(), d.match(qb), c.push({
            name: d,
            specified: !0,
            value: e || ""
        });
        return Na(b, c)
    };
    var sb = /\|\s*html\s*/,
        tc = /\|\|/g, rc = /&lt;/g, sc = /&gt;/g, xb = {
            _toString: function () {
                var b = this.node.className;
                return ("string" === typeof b ? b : b.baseVal).split(/\s+/).join(" ")
            }, _contains: function (b) {
                return -1 < (" " + this + " ").indexOf(" " + b + " ")
            }, _add: function (b) {
                this.contains(b) || this._set(this + " " + b)
            }, _remove: function (b) {
                this._set((" " + this + " ").replace(" " + b + " ", " "))
            }, __set: function (b) {
                b = b.trim();
                var c = this.node;
                Ja.test(c) ? c.setAttribute("class", b) : c.className = b
            }
        };
    "add,remove".replace(A, function (b) {
        avalon.fn[b + "Class"] = function (c) {
            var d =
                this[0];
            c && ("string" === typeof c && d && 1 === d.nodeType) && c.replace(/\S+/g, function (c) {
                wb(d)[b](c)
            });
            return this
        }
    });
    avalon.fn.mix({
        hasClass: function (b) {
            var c = this[0] || {};
            return 1 === c.nodeType && wb(c).contains(b)
        }, toggleClass: function (b, c) {
            for (var d, e = 0, f = b.split(/\s+/), g = "boolean" === typeof c; d = f[e++];)this[(g ? c : !this.hasClass(d)) ? "addClass" : "removeClass"](d);
            return this
        }, attr: function (b, c) {
            return 2 === arguments.length ? (this[0].setAttribute(b, c), this) : this[0].getAttribute(b)
        }, data: function (b, c) {
            b = "data-" +
            vb(b || "");
            switch (arguments.length) {
                case 2:
                    return this.attr(b, c), this;
                case 1:
                    var d = this.attr(b);
                    return yb(d);
                case 0:
                    var e = {};
                    K.forEach.call(this[0].attributes, function (c) {
                        c && (b = c.name, b.indexOf("data-") || (b = oa(b.slice(5)), e[b] = yb(c.value)))
                    });
                    return e
            }
        }, removeData: function (b) {
            b = "data-" + vb(b);
            this[0].removeAttribute(b);
            return this
        }, css: function (b, c) {
            if (avalon.isPlainObject(b))for (var d in b)avalon.css(this, d, b[d]); else var e = avalon.css(this, b, c);
            return void 0 !== e ? e : this
        }, position: function () {
            var b, c,
                d = this[0], e = {top: 0, left: 0};
            if (d)return "fixed" === this.css("position") ? c = d.getBoundingClientRect() : (b = this.offsetParent(), c = this.offset(),
            "HTML" !== b[0].tagName && (e = b.offset()), e.top += avalon.css(b[0], "borderTopWidth", !0), e.left += avalon.css(b[0], "borderLeftWidth", !0)
            ),
            {
                top:c.top - e.top - avalon.css(d, "marginTop", !0), left
            :
                c.left - e.left - avalon.css(d, "marginLeft", !0)
            }
        }, offsetParent: function () {
            for (var b = this[0].offsetParent; b && "static" === avalon.css(b, "position");)b = b.offsetParent;
            return avalon(b)
        }, bind: function (b,
                           c, d) {
            if (this[0])return avalon.bind(this[0], b, c, d)
        }, unbind: function (b, c, d) {
            this[0] && avalon.unbind(this[0], b, c, d);
            return this
        }, val: function (b) {
            var c = this[0];
            if (c && 1 === c.nodeType) {
                var d = 0 === arguments.length, e = d ? ":get" : ":set", f = Oa, g;
                g = c.tagName.toLowerCase();
                g = "input" === g && /checkbox|radio/.test(c.type) ? "checked" : g;
                if (e = f[g + e])var h = e(c, b); else {
                    if (d)return (c.value || "").replace(/\r/g, "");
                    c.value = b
                }
            }
            return d ? h : this
        }
    });
    var uc = /(?:\{[\s\S]*\}|\[[\s\S]*\])$/, fd = /^[\],:{}\s]*$/, gd = /(?:^|:|,)(?:\s*\[)+/g, hd =
        /\\(?:["\\\/bfnrt]|u[\da-fA-F]{4})/g, id = /"[^"\\\r\n]*"|true|false|null|-?(?:\d+\.|)\d+(?:[eE][+-]?\d+|)/g;
    avalon.parseJSON = r.JSON ? JSON.parse : function (b) {
        if ("string" === typeof b) {
            if ((b = b.trim()) && fd.test(b.replace(hd, "@").replace(id, "]").replace(gd, "")))return (new Function("return " + b))();
            avalon.error("Invalid JSON: " + b)
        }
        return b
    };
    avalon.each({scrollLeft: "pageXOffset", scrollTop: "pageYOffset"}, function (b, c) {
        avalon.fn[b] = function (d) {
            var e = this[0] || {}, f = e.window && e.document ? e : 9 === e.nodeType ? e.defaultView ||
            e.parentWindow : !1, g = "scrollTop" === b;
            if (arguments.length)f ? f.scrollTo(!g ? d : avalon(f).scrollLeft(), g ? d : avalon(f).scrollTop()) : e[b] = d; else return f ? c in f ? f[c] : B[b] : e[b]
        }
    });
    var w = avalon.cssHooks = {}, Vb = ["", "-webkit-", "-o-", "-moz-", "-ms-"], Pa = {"float": y ? "cssFloat" : "styleFloat"};
    avalon.cssNumber = S("columnCount,order,fillOpacity,fontWeight,lineHeight,opacity,orphans,widows,zIndex,zoom");
    avalon.cssName = function (b, c, d) {
        if (Pa[b])return Pa[b];
        c = c || B.style;
        for (var e = 0, f = Vb.length; e < f; e++)if (d = oa(Vb[e] + b), d in
            c)return Pa[b] = d;
        return null
    };
    w["@:set"] = function (b, c, d) {
        try {
            b.style[c] = d
        } catch (e) {
        }
    };
    if (r.getComputedStyle)w["@:get"] = function (b, c) {
        if (!b || !b.style)throw Error("getComputedStyle\u8981\u6c42\u4f20\u5165\u4e00\u4e2a\u8282\u70b9 " + b);
        var d, e = getComputedStyle(b, null);
        e && (d = "filter" === c ? e.getPropertyValue(c) : e[c], "" === d && (d = b.style[c]));
        return d
    }, w["opacity:get"] = function (b) {
        b = w["@:get"](b, "opacity");
        return "" === b ? "1" : b
    }; else {
        var jd = /^-?(?:\d*\.)?\d+(?!px)[^\d\s]+$/i, kd = /^(top|right|bottom|left)$/, Wb =
            /alpha\([^)]*\)/i, Qa = !!r.XDomainRequest, ld = {
            thin: Qa ? "1px" : "2px",
            medium: Qa ? "3px" : "4px",
            thick: Qa ? "5px" : "6px"
        };
        w["@:get"] = function (b, c) {
            var d = b.currentStyle, e = d[c];
            if (jd.test(e) && !kd.test(e)) {
                var f = b.style, g = f.left, h = b.runtimeStyle.left;
                b.runtimeStyle.left = d.left;
                f.left = "fontSize" === c ? "1em" : e || 0;
                e = f.pixelLeft + "px";
                f.left = g;
                b.runtimeStyle.left = h
            }
            "medium" === e && (c = c.replace("Width", "Style"), "none" === d[c] && (e = "0px"));
            return "" === e ? "auto" : ld[e] || e
        };
        w["opacity:set"] = function (b, c, d) {
            b = b.style;
            d = isFinite(d) &&
            1 >= d ? "alpha(opacity=" + 100 * d + ")" : "";
            c = b.filter || "";
            b.zoom = 1;
            b.filter = (Wb.test(c) ? c.replace(Wb, d) : c + " " + d).trim();
            b.filter || b.removeAttribute("filter")
        };
        w["opacity:get"] = function (b) {
            b = b.filters.alpha || b.filters["DXImageTransform.Microsoft.Alpha"];
            return (b && b.enabled ? b.opacity : 100) / 100 + ""
        }
    }
    "top,left".replace(A, function (b) {
        w[b + ":get"] = function (c) {
            var d = w["@:get"](c, b);
            return /px$/.test(d) ? d : avalon(c).position()[b] + "px"
        }
    });
    var Ab = {position: "absolute", visibility: "hidden", display: "block"}, vc = /^(none|table(?!-c[ea]).+)/;
    "Width,Height".replace(A, function (b) {
        var c = b.toLowerCase(), d = "client" + b, e = "scroll" + b, f = "offset" + b;
        w[c + ":get"] = function (c, d, e) {
            var l = -4;
            "number" === typeof e && (l = e);
            d = "Width" === b ? ["Left", "Right"] : ["Top", "Bottom"];
            e = c[f];
            if (2 === l)return e + avalon.css(c, "margin" + d[0], !0) + avalon.css(c, "margin" + d[1], !0);
            0 > l && (e = e - avalon.css(c, "border" + d[0] + "Width", !0) - avalon.css(c, "border" + d[1] + "Width", !0));
            -4 === l && (e = e - avalon.css(c, "padding" + d[0], !0) - avalon.css(c, "padding" + d[1], !0));
            return e
        };
        w[c + "&get"] = function (b) {
            var d =
                [];
            zb(b, d);
            for (var e = w[c + ":get"](b), f = 0, m; m = d[f++];) {
                b = m.node;
                for (var n in m)"string" === typeof m[n] && (b.style[n] = m[n])
            }
            return e
        };
        avalon.fn[c] = function (g) {
            var h = this[0];
            if (0 === arguments.length) {
                if (h.setTimeout)return h["inner" + b] || h.document.documentElement[d];
                if (9 === h.nodeType) {
                    var k = h.documentElement;
                    return Math.max(h.body[e], k[e], h.body[f], k[f], k[d])
                }
                return w[c + "&get"](h)
            }
            return this.css(c, g)
        };
        avalon.fn["inner" + b] = function () {
            return w[c + ":get"](this[0], void 0, -2)
        };
        avalon.fn["outer" + b] = function (b) {
            return w[c +
            ":get"](this[0], void 0, !0 === b ? 2 : 0)
        }
    });
    avalon.fn.offset = function () {
        var b = this[0], c = {left: 0, top: 0};
        if (!b || !b.tagName || !b.ownerDocument)return c;
        var d = b.ownerDocument, e = d.body, f = d.documentElement, d = d.defaultView || d.parentWindow;
        if (!avalon.contains(f, b))return c;
        b.getBoundingClientRect && (c = b.getBoundingClientRect());
        var b = f.clientTop || e.clientTop, g = f.clientLeft || e.clientLeft, h = Math.max(d.pageYOffset || 0, f.scrollTop, e.scrollTop), e = Math.max(d.pageXOffset || 0, f.scrollLeft, e.scrollLeft);
        return {
            top: c.top + h -
            b, left: c.left + e - g
        }
    };
    var md = /^<option(?:\s+\w+(?:\s*=\s*(?:"[^"]*"|'[^']*'|[^\s>]+))?)*\s+value[\s=]/i, Oa = {
            "option:get": R ? function (b) {
                return md.test(b.outerHTML) ? b.value : b.text.trim()
            } : function (b) {
                return b.value
            }, "select:get": function (b, c) {
                for (var d, e = b.options, f = b.selectedIndex, g = Oa["option:get"], h = "select-one" === b.type || 0 > f, k = h ? null : [], l = h ? f + 1 : e.length, m = 0 > f ? l : h ? f : 0; m < l; m++)if (d = e[m], (d.selected || m === f) && !d.disabled) {
                    c = g(d);
                    if (h)return c;
                    k.push(c)
                }
                return k
            }, "select:set": function (b, c, d) {
                c = [].concat(c);
                for (var e = Oa["option:get"], f = 0, g; g = b.options[f++];)if (g.selected = -1 < c.indexOf(e(g)))d = !0;
                d || (b.selectedIndex = -1)
            }
        }, nd = {
            "\b": "\\b",
            "\t": "\\t",
            "\n": "\\n",
            "\f": "\\f",
            "\r": "\\r",
            '"': '\\"',
            "\\": "\\\\"
        }, Cb = r.JSON && JSON.stringify || function (b) {
                return '"' + b.replace(/[\\\"\x00-\x1f]/g, function (b) {
                        var d = nd[b];
                        return "string" === typeof d ? d : "\\u" + ("0000" + b.charCodeAt(0).toString(16)).slice(-4)
                    }) + '"'
            }, od = /\/\*[\w\W]*?\*\/|\/\/[^\n]*\n|\/\/[^\n]*$|"(?:[^"\\]|\\[\w\W])*"|'(?:[^'\\]|\\[\w\W])*'|[\s\t\n]*\.[\s\t\n]*[$\w\.]+/g,
        pd = /[^\w$]+/g, qd = RegExp("" + ("\\b" + "break,case,catch,continue,debugger,default,delete,do,else,false,finally,for,function,if,in,instanceof,new,null,return,switch,this,throw,true,try,typeof,var,void,while,with,abstract,boolean,byte,char,class,const,double,enum,export,extends,final,float,goto,implements,import,int,interface,long,native,package,private,protected,public,short,static,super,synchronized,throws,transient,volatile,arguments,let,yield,undefined".replace(/,/g, "\\b|\\b") + "\\b"), "g"), rd = /\b\d[^,]*/g,
        sd = /^,+|,+$/g, Ra = qa(512), Ec = function (b) {
            var c = "," + b.trim();
            if (Ra[c])return Ra[c];
            b = b.replace(od, "").replace(pd, ",").replace(qd, "").replace(rd, "").replace(sd, "").split(/^$|,+/);
            return Ra(c, Bb(b))
        }, Ga = qa(128), Fc = /\w\[.*\]|\w\.\w/, Dc = /(\$proxy\$[a-z]+)\d+$/, yc = /\)\s*$/, zc = /\)\s*\|/g, Ac = /\|\s*([$\w]+)/g, Bc = /"\s*\["/g, Cc = /"\s*\(/g;
    avalon.parseExprProxy = J;
    var Sa = {};
    "autofocus,autoplay,async,allowTransparency,checked,controls,declare,disabled,defer,defaultChecked,defaultSelectedcontentEditable,isMap,loop,multiple,noHref,noResize,noShade,open,readOnly,selected".replace(A,
        function (b) {
            Sa[b.toLowerCase()] = b
        });
    var Ta = {
        "accept-charset": "acceptCharset",
        "char": "ch",
        charoff: "chOff",
        "class": "className",
        "for": "htmlFor",
        "http-equiv": "httpEquiv"
    };
    "accessKey,bgColor,cellPadding,cellSpacing,codeBase,codeType,colSpan,dateTime,defaultValue,frameBorder,longDesc,maxLength,marginWidth,marginHeight,rowSpan,tabIndex,useMap,vSpace,valueType,vAlign".replace(A, function (b) {
        Ta[b.toLowerCase()] = b
    });
    var td = /<noscript.*?>(?:[\s\S]+?)<\/noscript>/img, ud = /<noscript.*?>([\s\S]+?)<\/noscript>/im,
        Ua = function () {
            return new (r.XMLHttpRequest || ActiveXObject)("Microsoft.XMLHTTP")
        }, Va = avalon.templateCache = {};
    v.attr = function (b, c) {
        var d = b.value.trim(), e = !0;
        -1 < d.indexOf(O) && 2 < d.indexOf(P) && (e = !1, ea.test(d) && ("" === RegExp.rightContext && "" === RegExp.leftContext) && (e = !0, d = RegExp.$1));
        if ("include" === b.type) {
            var f = b.element;
            b.includeRendered = ka(f, "data-include-rendered", c);
            b.includeLoaded = ka(f, "data-include-loaded", c);
            var g = b.includeReplaced = !!avalon(f).data("includeReplace");
            b.startInclude = q.createComment("ms-include");
            b.endInclude = q.createComment("ms-include-end");
            g ? (b.element = b.startInclude, f.parentNode.insertBefore(b.startInclude, f), f.parentNode.insertBefore(b.endInclude, f.nextSibling)) : (f.insertBefore(b.startInclude, f.firstChild), f.appendChild(b.endInclude))
        }
        b.handlerName = "attr";
        J(d, c, b, e ? 0 : Fa(b.value))
    };
    E.attr = function (b, c, d) {
        var e = d.type, f = d.param;
        if ("css" === e)avalon(c).css(f, b); else if ("attr" === e) {
            if (Sa[f] && (e = Sa[f], "boolean" === typeof c[e]))return c[e] = !!b;
            !y && Ta[f] && (f = Ta[f]);
            if (!1 === b || null === b || void 0 ===
                b)return c.removeAttribute(f);
            (Ja.test(c) ? 0 : q.namespaces && jb(c) || f in c.cloneNode(!1)) ? c[f] = b : c.setAttribute(f, b)
        } else if ("include" === e && b) {
            var g = d.vmodels, h = d.includeRendered, k = d.includeLoaded, l = d.includeReplaced ? c.parentNode : c, m = function (b) {
                k && (b = k.apply(l, [b].concat(g)));
                for (h && ma(l, function () {
                    h.call(l)
                }, NaN); ;) {
                    var c = d.startInclude.nextSibling;
                    if (c && c !== d.endInclude)l.removeChild(c); else break
                }
                b = avalon.parseHTML(b);
                c = avalon.slice(b.childNodes);
                l.insertBefore(b, d.endInclude);
                na(c, g)
            };
            if ("src" ===
                d.param)if (Va[b])avalon.nextTick(function () {
                m(Va[b])
            }); else {
                var n = Ua();
                n.onreadystatechange = function () {
                    if (4 === n.readyState) {
                        var c = n.status;
                        if (200 <= c && 300 > c || 304 === c || 1223 === c)m(Va[b] = n.responseText)
                    }
                };
                n.open("GET", b, !0);
                "withCredentials"in n && (n.withCredentials = !0);
                n.setRequestHeader("X-Requested-With", "XMLHttpRequest");
                n.send(null)
            } else {
                var p = b && 1 === b.nodeType ? b : q.getElementById(b);
                if (p) {
                    if ("NOSCRIPT" === p.tagName && !p.innerHTML && !p.fixIE78) {
                        n = Ua();
                        n.open("GET", location, !1);
                        n.send(null);
                        c = q.getElementsByTagName("noscript");
                        for (var f = (n.responseText || "").match(td) || [], e = f.length, s = 0; s < e; s++) {
                            var F = c[s];
                            F && (F.style.display = "none", F.fixIE78 = (f[s].match(ud) || ["", "&nbsp;"])[1])
                        }
                    }
                    avalon.nextTick(function () {
                        m(p.fixIE78 || p.value || p.innerText || p.innerHTML)
                    })
                }
            }
        } else {
            if (!B.hasAttribute && "string" === typeof b && ("src" === e || "href" === e))b = b.replace(/&amp;/g, "&");
            c[e] = b;
            r.chrome && "EMBED" === c.tagName && (f = c.parentNode, e = document.createComment("ms-src"), f.replaceChild(e, c), f.replaceChild(c, e))
        }
    };
    "title,alt,src,value,css,include,href".replace(A,
        function (b) {
            v[b] = v.attr
        });
    v["class"] = function (b, c) {
        var d = b.param, e = b.value;
        b.handlerName = "class";
        if (!d || isFinite(d)) {
            b.param = "";
            var f = e.replace(Qb, function (b) {
                return b.replace(/./g, "0")
            }).indexOf(":");
            if (-1 === f)d = e; else if (d = e.slice(0, f), e = e.slice(f + 1), Db(e, c, b), b.evaluator)b._evaluator = b.evaluator, b._args = b.args; else return x("debug: ms-class '" + (e || "").trim() + "' \u4e0d\u5b58\u5728\u4e8eVM\u4e2d"), !1;
            e = ea.test(d);
            e || (b.immobileClass = d);
            J("", c, b, e ? Fa(d) : 0)
        } else b.immobileClass = b.oldStyle = b.param,
            J(e, c, b)
    };
    E["class"] = function (b, c, d) {
        var e = avalon(c), f = d.type;
        if ("class" === f && d.oldStyle)e.toggleClass(d.oldStyle, !!b); else switch (d.toggleClass = d._evaluator ? !!d._evaluator.apply(c, d._args) : !0, d.newClass = d.immobileClass || b, d.oldClass && d.newClass !== d.oldClass && e.removeClass(d.oldClass), d.oldClass = d.newClass, f) {
            case "class":
                e.toggleClass(d.newClass, d.toggleClass);
                break;
            case "hover":
            case "active":
                if (!d.hasBindEvent) {
                    var g = "mouseenter", h = "mouseleave";
                    if ("active" === f) {
                        c.tabIndex = c.tabIndex || -1;
                        var g = "mousedown",
                            h = "mouseup", k = e.bind("mouseleave", function () {
                                d.toggleClass && e.removeClass(d.newClass)
                            })
                    }
                    var l = e.bind(g, function () {
                        d.toggleClass && e.addClass(d.newClass)
                    }), m = e.bind(h, function () {
                        d.toggleClass && e.removeClass(d.newClass)
                    });
                    d.rollback = function () {
                        e.unbind("mouseleave", k);
                        e.unbind(g, l);
                        e.unbind(h, m)
                    };
                    d.hasBindEvent = !0
                }
        }
    };
    "hover,active".replace(A, function (b) {
        v[b] = v["class"]
    });
    E.data = function (b, c, d) {
        d = "data-" + d.param;
        b && "object" === typeof b ? c[d] = b : c.setAttribute(d, String(b))
    };
    E.text = function (b, c) {
        b = null == b ?
            "" : b;
        if (3 === c.nodeType)try {
            c.data = b
        } catch (d) {
        } else"textContent"in c ? c.textContent = b : c.innerText = b
    };
    E.html = function (b, c, d) {
        b = null == b ? "" : b;
        var e = "group"in d, f = e ? c.parentNode : c;
        if (f) {
            if (11 !== b.nodeType)if (1 === b.nodeType || b.item) {
                var g = 1 === b.nodeType ? b.childNodes : b.item ? b : [];
                for (b = Y.cloneNode(!0); g[0];)b.appendChild(g[0])
            } else b = avalon.parseHTML(b);
            var h = q.createComment("ms-html");
            if (e) {
                f.insertBefore(h, c);
                for (var g = d.group, k = 1; k < g;) {
                    var l = c.nextSibling;
                    l && (f.removeChild(l), k++)
                }
                f.removeChild(c);
                d.element =
                    h
            } else avalon.clearHTML(f).appendChild(h);
            e && (d.group = b.childNodes.length || 1);
            g = avalon.slice(b.childNodes);
            g[0] && (h.parentNode && h.parentNode.replaceChild(b, h), e && (d.element = g[0]));
            na(g, d.vmodels)
        }
    };
    v["if"] = v.data = v.text = v.html = function (b, c) {
        J(b.value, c, b)
    };
    E["if"] = function (b, c, d) {
        b ? (8 === c.nodeType && (c.parentNode.replaceChild(d.template, c), c = d.element = d.template), c.getAttribute(d.name) && (c.removeAttribute(d.name), mb(c, d.vmodels)), d.rollback = null) : 1 === c.nodeType && (b = d.element = q.createComment("ms-if"),
            c.parentNode.replaceChild(b, c), d.template = c, ha.appendChild(c), d.rollback = function () {
            c.parentNode === ha && ha.removeChild(c)
        })
    };
    avalon.parseDisplay = fa;
    v.visible = function (b, c) {
        var d = avalon(b.element), e = d.css("display");
        if ("none" === e) {
            var f = d[0].style, g = /visibility/i.test(f.cssText), h = d.css("visibility");
            f.display = "";
            f.visibility = "hidden";
            e = d.css("display");
            "none" === e && (e = fa(d[0].nodeName));
            f.visibility = g ? h : ""
        }
        b.display = e;
        J(b.value, c, b)
    };
    E.visible = function (b, c, d) {
        c.style.display = b ? d.display : "none"
    };
    var Xb =
        /\(([^)]*)\)/;
    v.on = function (b, c) {
        var d = b.value, e = b.param.replace(/-\d+$/, "");
        if ("function" === typeof v.on[e + "Hook"])v.on[e + "Hook"](b);
        if (0 < d.indexOf("(") && -1 < d.indexOf(")") && (e = (d.match(Xb) || ["", ""])[1].trim(), "" === e || "$event" === e))d = d.replace(Xb, "");
        J(d, c, b)
    };
    E.on = function (b, c, d) {
        d.type = "on";
        b = function (b) {
            return (d.evaluator || z).apply(this, d.args.concat(b))
        };
        var e = d.param.replace(/-\d+$/, "");
        if ("scan" === e)b.call(c, {type: e}); else if ("function" === typeof d.specialBind)d.specialBind(c, b); else var f = avalon.bind(c,
            e, b);
        d.rollback = function () {
            "function" === typeof d.specialUnbind ? d.specialUnbind() : avalon.unbind(c, e, f)
        }
    };
    v.widget = function (b, c) {
        var d = b.value.match(A), e = b.element, f = d[0], g = d[1];
        if (!g || "$" === g)g = N(f);
        var d = d[2] || f, h = avalon.ui[f];
        if ("function" === typeof h) {
            c = e.vmodels || c;
            for (var k = 0, l; l = c[k++];)if (l.hasOwnProperty(d) && "object" === typeof l[d]) {
                var m = l[d], m = m.$model || m;
                break
            }
            m && (k = m[f + "Id"], "string" === typeof k && (g = k));
            k = avalon.getWidgetData(e, f);
            b.value = [f, g, d].join();
            b[f + "Id"] = g;
            b.evaluator = z;
            e.msData["ms-widget-id"] =
                g;
            var n = b[f + "Options"] = avalon.mix({}, h.defaults, m || {}, k);
            e.removeAttribute("ms-widget");
            var p = h(e, b, c) || {};
            p.$id ? (avalon.vmodels[g] = p, kb(e, p), p.hasOwnProperty("$init") && p.$init(function () {
                avalon.scan(e, [p].concat(c));
                "function" === typeof n.onInit && n.onInit.call(e, p, n, c)
            }), b.rollback = function () {
                try {
                    p.widgetElement = null, p.$remove()
                } catch (b) {
                }
                e.msData = {};
                delete avalon.vmodels[p.$id]
            }, Ca(b, vd), r.chrome && e.addEventListener("DOMNodeRemovedFromDocument", function () {
                setTimeout(gb)
            })) : avalon.scan(e, c)
        } else c.length &&
        (e.vmodels = c)
    };
    var vd = [], Z = v.duplex = function (b, c) {
        var d = b.element, e;
        J(b.value, c, b, 0, 1);
        b.changed = ka(d, "data-duplex-changed", c) || z;
        if (b.evaluator && b.args) {
            var f = [], g = S("string,number,boolean,checked");
            "radio" === d.type && "" === b.param && (b.param = "checked");
            d.msData && (d.msData["ms-duplex"] = b.value);
            b.param.replace(/\w+/g, function (c) {
                /^(checkbox|radio)$/.test(d.type) && /^(radio|checked)$/.test(c) && ("radio" === c && x("ms-duplex-radio\u5df2\u7ecf\u66f4\u540d\u4e3ams-duplex-checked"), c = "checked", b.isChecked = !0);
                "bool" === c ? (c = "boolean", x("ms-duplex-bool\u5df2\u7ecf\u66f4\u540d\u4e3ams-duplex-boolean")
                ):
                "text" === c && (c = "string", x("ms-duplex-text\u5df2\u7ecf\u66f4\u540d\u4e3ams-duplex-string"));
                g[c] && (e = !0);
                avalon.Array.ensure(f, c)
            });
            e || f.push("string");
            b.param = f.join("-");
            b.bound = function (c, e) {
                d.addEventListener ? d.addEventListener(c, e, !1) : d.attachEvent("on" + c, e);
                var f = b.rollback;
                b.rollback = function () {
                    d.avalonSetter = null;
                    avalon.unbind(d, c, e);
                    f && f()
                }
            };
            for (var h in avalon.vmodels)avalon.vmodels[h].$fire("avalon-ms-duplex-init",
                b);
            (b.pipe || (b.pipe = Gc))(null, b, "init");
            h = d.tagName;
            Z[h] && Z[h](d, b.evaluator.apply(null, b.args), b)
        }
    };
    avalon.duplexHooks = {
        checked: {
            get: function (b, c) {
                return !c.element.oldValue
            }
        }, string: {
            get: function (b) {
                return b
            }, set: Ha
        }, "boolean": {
            get: function (b) {
                return "true" === b
            }, set: Ha
        }, number: {
            get: function (b) {
                return isFinite(b) ? parseFloat(b) || 0 : b
            }, set: Ha
        }
    };
    var Eb, ga = [];
    avalon.tick = function (b) {
        1 === ga.push(b) && (Eb = setInterval(Hc, 60))
    };
    var Yb = z;
    new function () {
        try {
            var b = {}, c = HTMLInputElement.prototype, d = HTMLTextAreaElement.prototype,
                e = function (c) {
                    avalon.contains(B, this) && (b[this.tagName].call(this, c), this.avalonSetter && this.avalonSetter())
                };
            Object.getOwnPropertyNames(HTMLInputElement.prototype);
            b.INPUT = Object.getOwnPropertyDescriptor(c, "value").set;
            Object.defineProperty(c, "value", {set: e});
            b.TEXTAREA = Object.getOwnPropertyDescriptor(d, "value").set;
            Object.defineProperty(d, "value", {set: e})
        } catch (f) {
            Yb = avalon.tick
        }
    };
    R && avalon.bind(q, "selectionchange", function (b) {
        (b = q.activeElement) && "function" === typeof b.avalonSetter && b.avalonSetter()
    });
    Z.INPUT = function (b, c, d) {
        function e(b) {
            d.changed.call(this, b, d)
        }

        function f() {
            n = !0
        }

        function g() {
            n = !1
        }

        function h() {
            if (!n) {
                var f = b.oldValue = b.value, f = d.pipe(f, d, "get");
                !1 !== m.data("duplex-observe") && (c(f), e.call(b, f), m.data("duplex-focus") && avalon.nextTick(function () {
                    b.focus()
                }))
            }
        }

        var k = b.type, l = d.bound, m = avalon(b), n = !1;
        d.handler = function () {
            var e = d.pipe(c(), d, "set");
            e !== b.oldValue && (b.value = e)
        };
        if (d.isChecked || "radio" === b.type) {
            var p = 6 === R, h = function () {
                if (!1 !== m.data("duplex-observe")) {
                    var f = d.pipe(b.value,
                        d, "get");
                    c(f);
                    e.call(b, f)
                }
            };
            d.handler = function () {
                var e = c(), f = d.isChecked ? !!e : e + "" === b.value;
                b.oldValue = f;
                p ? setTimeout(function () {
                    b.defaultChecked = f;
                    b.checked = f
                }, 100) : b.checked = f
            };
            l(p ? "mouseup" : "click", h)
        } else if ("checkbox" === k)h = function () {
            if (!1 !== m.data("duplex-observe")) {
                var f = b.checked ? "ensure" : "remove", g = c();
                Array.isArray(g) || (x("ms-duplex\u5e94\u7528\u4e8echeckbox\u4e0a\u8981\u5bf9\u5e94\u4e00\u4e2a\u6570\u7ec4"), g = [g]);
                avalon.Array[f](g, d.pipe(b.value, d, "get"));
                e.call(b, g)
            }
        }, d.handler = function () {
            var e =
                [].concat(c());
            b.checked = -1 < e.indexOf(d.pipe(b.value, d, "get"))
        }, l(y ? "change" : "click", h); else {
            k = b.getAttribute("data-duplex-event") || b.getAttribute("data-event") || "input";
            b.attributes["data-event"] && x("data-event\u6307\u4ee4\u5df2\u7ecf\u5e9f\u5f03\uff0c\u8bf7\u6539\u7528data-duplex-event");
            var s = function (b) {
                setTimeout(function () {
                    h(b)
                })
            };
            k.replace(A, function (b) {
                switch (b) {
                    case "input":
                        R ? (8 < R ? l("input", h) : l("propertychange", function (b) {
                            "value" === b.propertyName && h()
                        }), l("dragend", s)) : (l("input", h), l("compositionstart",
                            f), l("compositionend", g), l("DOMAutoComplete", h));
                        break;
                    default:
                        l(b, h)
                }
            })
        }
        /text|password/.test(b.type) && Yb(function () {
            if (B.contains(b))b.value !== b.oldValue && h(); else if (!b.msRetain)return !1
        });
        b.avalonSetter = h;
        b.oldValue = b.value;
        Ba(d);
        e.call(b, b.value)
    };
    Z.TEXTAREA = Z.INPUT;
    Z.SELECT = function (b, c, d) {
        var e = avalon(b);
        d.handler = function () {
            var d = c(), d = d && d.$model || d;
            Array.isArray(d) ? b.multiple || x("ms-duplex\u5728<select multiple=true>\u4e0a\u8981\u6c42\u5bf9\u5e94\u4e00\u4e2a\u6570\u7ec4") : b.multiple && x("ms-duplex\u5728<select multiple=false>\u4e0d\u80fd\u5bf9\u5e94\u4e00\u4e2a\u6570\u7ec4");
            d = Array.isArray(d) ? d.map(String) : d + "";
            d + "" !== b.oldValue && (e.val(d), b.oldValue = d + "")
        };
        d.bound("change", function () {
            if (!1 !== e.data("duplex-observe")) {
                var f = e.val(), f = Array.isArray(f) ? f.map(function (b) {
                    return d.pipe(b, d, "get")
                }) : d.pipe(f, d, "get");
                f + "" !== b.oldValue && c(f);
                d.changed.call(b, f, d)
            }
        });
        ma(b, function () {
            Ba(d);
            d.changed.call(b, c(), d)
        }, NaN)
    };
    v.repeat = function (b, c) {
        var d = b.type;
        J(b.value, c, b, 0, 1);
        b.proxies = [];
        var e = !1;
        try {
            var f = b.$repeat = b.evaluator.apply(0, b.args || []), g = avalon.type(f);
            "object" !==
            g && "array" !== g && (e = !0, avalon.log("warning:" + b.value + "\u5bf9\u5e94\u7c7b\u578b\u4e0d\u6b63\u786e"))
        } catch (h) {
            e = !0, avalon.log("warning:" + b.value + "\u7f16\u8bd1\u51fa\u9519")
        }
        var k = b.value.split(".") || [];
        if (1 < k.length) {
            k.pop();
            for (var l = k[0], k = 0, m; m = c[k++];)if (m && m.hasOwnProperty(l)) {
                k = m[l].$events || {};
                k[G] = k[G] || [];
                k[G].push(b);
                break
            }
        }
        k = b.element;
        k.removeAttribute(b.name);
        b.sortedCallback = ka(k, "data-with-sorted", c);
        b.renderedCallback = ka(k, "data-" + d + "-rendered", c);
        l = N(d);
        m = b.element = q.createComment(l +
        ":end");
        b.clone = q.createComment(l);
        Y.appendChild(m);
        "each" === d || "with" === d ? (b.template = k.innerHTML.trim(), avalon.clearHTML(k).appendChild(m)) : (b.template = k.outerHTML.trim(), k.parentNode.replaceChild(m, k));
        b.template = avalon.parseHTML(b.template);
        b.rollback = function () {
            var c = b.element;
            if (c) {
                E.repeat.call(b, "clear");
                var d = c.parentNode, e = b.template, f = e.firstChild;
                d.replaceChild(e, c);
                (c = b.$stamp) && c.parentNode && c.parentNode.removeChild(c);
                b.element = "repeat" === b.type ? f : d
            }
        };
        if (!e) {
            b.handler = E.repeat;
            b.$outer =
            {};
            d = "$key";
            e = "$val";
            Array.isArray(f) && (d = "$first", e = "$last");
            for (k = 0; l = c[k++];)if (l.hasOwnProperty(d) && l.hasOwnProperty(e)) {
                b.$outer = l;
                break
            }
            d = f.$events;
            (e = (d || {})[G]) && avalon.Array.ensure(e, b) && Ca(b, e);
            "object" === g ? (b.$with = !0, g = !d ? {} : d.$withProxyPool || (d.$withProxyPool = {}), b.handler("append", f, g)) : f.length && b.handler("add", 0, f.length)
        }
    };
    E.repeat = function (b, c, d) {
        if (b) {
            var e = this.element, f = e.parentNode, g = this.proxies, h = Y.cloneNode(!1);
            switch (b) {
                case "add":
                    for (var e = c + d, k = this.$repeat.length - 1, k =
                        [], l = Gb(this, c), m = c; m < e; m++) {
                        var n = Jc(m, this);
                        g.splice(m, 0, n);
                        Fb(this, h, n, k)
                    }
                    f.insertBefore(h, l);
                    for (m = 0; h = k[m++];)na(h.nodes, h.vmodels), h.nodes = h.vmodels = null;
                    break;
                case "del":
                    l = g[c].$stamp;
                    e = Gb(this, c + d);
                    Ia(l, e);
                    h = g.splice(c, d);
                    ya(h, "each");
                    break;
                case "clear":
                    if (h = this.$stamp || g[0])l = h.$stamp || h, Ia(l, e);
                    ya(g, "each");
                    break;
                case "move":
                    var l = g[0].$stamp, p = l.nodeValue, s = [], F = [];
                    Ia(l, e, function () {
                        F.unshift(this);
                        this.nodeValue === p && (s.unshift(F), F = [])
                    });
                    Aa(g, c);
                    for (Aa(s, c); F = s.shift();)for (; k = F.shift();)h.appendChild(k);
                    f.insertBefore(h, e);
                    break;
                case "index":
                    for (k = g.length - 1; d = g[c]; c++)d.$index = c, d.$first = 0 === c, d.$last = c === k;
                    return;
                case "set":
                    (n = g[c]) && va(n.$events.$index);
                    return;
                case "append":
                    g = d;
                    l = [];
                    k = [];
                    for (n in c)c.hasOwnProperty(n) && "hasOwnProperty" !== n && l.push(n);
                    this.sortedCallback && (m = this.sortedCallback.call(f, l)) && (Array.isArray(m) && m.length) && (l = m);
                    for (m = 0; n = l[m++];)"hasOwnProperty" !== n && (g[n] || (g[n] = Lc(n, this)), Fb(this, h, g[n], k));
                    m = this.$stamp = this.clone;
                    f.insertBefore(m, e);
                    f.insertBefore(h, e);
                    for (m =
                             0; h = k[m++];)na(h.nodes, h.vmodels), h.nodes = h.vmodels = null
            }
            "clear" === b && (b = "del");
            var ta = this.renderedCallback || z, ca = arguments;
            ma(f, function () {
                ta.apply(f, ca);
                f.oldValue && "SELECT" === f.tagName && avalon(f).val(f.oldValue.split(","))
            }, NaN)
        }
    };
    "with,each".replace(A, function (b) {
        v[b] = v.repeat
    });
    var pa = [], Hb = [], wd = /<script[^>]*>([\S\s]*?)<\/script\s*>/gim, xd = /\s+(on[^=\s]+)(?:=("[^"]*"|'[^']*'|[^\s>]+))?/g, yd = /<\w+\b(?:(["'])[^"]*?(\1)|[^>])*>/ig, zd = {
        a: /\b(href)\=("javascript[^"]*"|'javascript[^']*')/ig, img: /\b(src)\=("javascript[^"]*"|'javascript[^']*')/ig,
        form: /\b(action)\=("javascript[^"]*"|'javascript[^']*')/ig
    }, Ad = /[\uD800-\uDBFF][\uDC00-\uDFFF]/g, Bd = /([^\#-~| |!])/g, Wa = avalon.filters = {
        uppercase: function (b) {
            return b.toUpperCase()
        }, lowercase: function (b) {
            return b.toLowerCase()
        }, truncate: function (b, c, d) {
            c = c || 30;
            d = void 0 === d ? "..." : d;
            return b.length > c ? b.slice(0, c - d.length) + d : String(b)
        }, $filter: function (b) {
            for (var c = 1, d = arguments.length; c < d; c++) {
                var e = arguments[c], f = avalon.filters[e.shift()];
                "function" === typeof f && (e = [b].concat(e), b = f.apply(null, e))
            }
            return b
        },
        camelize: oa, sanitize: function (b) {
            return b.replace(wd, "").replace(yd, function (b, d) {
                var e = b.toLowerCase().match(/<(\w+)\s/);
                e && (e = zd[e[1]]) && (b = b.replace(e, function (b, c, d) {
                    b = d.charAt(0);
                    return c + "=" + b + "javascript:void(0)" + b
                }));
                return b.replace(xd, " ").replace(/\s+/g, " ")
            })
        }, escape: function (b) {
            return String(b).replace(/&/g, "&amp;").replace(Ad, function (b) {
                var d = b.charCodeAt(0);
                b = b.charCodeAt(1);
                return "&#" + (1024 * (d - 55296) + (b - 56320) + 65536) + ";"
            }).replace(Bd, function (b) {
                return "&#" + b.charCodeAt(0) + ";"
            }).replace(/</g,
                "&lt;").replace(/>/g, "&gt;")
        }, currency: function (b, c, d) {
            return (c || "\uffe5") + Ib(b, isFinite(d) ? d : 2)
        }, number: function (b, c) {
            return Ib(b, isFinite(c) ? c : 3)
        }
    };
    new function () {
        function b(b, c, d) {
            var e = "";
            0 > b && (e = "-", b = -b);
            for (b = "" + b; b.length < c;)b = "0" + b;
            d && (b = b.substr(b.length - c));
            return e + b
        }

        function c(c, d, e, f) {
            return function (g) {
                g = g["get" + c]();
                if (0 < e || g > -e)g += e;
                0 === g && -12 === e && (g = 12);
                return b(g, d, f)
            }
        }

        function d(b, c) {
            return function (d, e) {
                var f = d["get" + b](), g = (c ? "SHORT" + b : b).toUpperCase();
                return e[g][f]
            }
        }

        function e(b) {
            var c;
            if (c = b.match(k)) {
                b = new Date(0);
                var d = 0, e = 0, f = c[8] ? b.setUTCFullYear : b.setFullYear, g = c[8] ? b.setUTCHours : b.setHours;
                c[9] && (d = parseInt(c[9] + c[10], 10), e = parseInt(c[9] + c[11], 10));
                f.call(b, parseInt(c[1], 10), parseInt(c[2], 10) - 1, parseInt(c[3], 10));
                d = parseInt(c[4] || 0, 10) - d;
                e = parseInt(c[5] || 0, 10) - e;
                f = parseInt(c[6] || 0, 10);
                c = Math.round(1E3 * parseFloat("0." + (c[7] || 0)));
                g.call(b, d, e, f, c)
            }
            return b
        }

        var f = {
                yyyy: c("FullYear", 4),
                yy: c("FullYear", 2, 0, !0),
                y: c("FullYear", 1),
                MMMM: d("Month"),
                MMM: d("Month", !0),
                MM: c("Month",
                    2, 1),
                M: c("Month", 1, 1),
                dd: c("Date", 2),
                d: c("Date", 1),
                HH: c("Hours", 2),
                H: c("Hours", 1),
                hh: c("Hours", 2, -12),
                h: c("Hours", 1, -12),
                mm: c("Minutes", 2),
                m: c("Minutes", 1),
                ss: c("Seconds", 2),
                s: c("Seconds", 1),
                sss: c("Milliseconds", 3),
                EEEE: d("Day"),
                EEE: d("Day", !0),
                a: function (b, c) {
                    return 12 > b.getHours() ? c.AMPMS[0] : c.AMPMS[1]
                },
                Z: function (c) {
                    c = -1 * c.getTimezoneOffset();
                    return c = (0 <= c ? "+" : "") + (b(Math[0 < c ? "floor" : "ceil"](c / 60), 2) + b(Math.abs(c % 60), 2))
                }
            }, g = /((?:[^yMdHhmsaZE']+)|(?:'(?:[^']|'')*')|(?:E+|y+|M+|d+|H+|h+|m+|s+|a|Z))(.*)/,
            h = /^\d+$/, k = /^(\d{4})-?(\d+)-?(\d+)(?:T(\d+)(?::?(\d+)(?::?(\d+)(?:\.(\d+))?)?)?(Z|([+-])(\d+):?(\d+))?)?$/, l = /^(\d+)\D(\d+)\D(\d+)/;
        Wa.date = function (b, c) {
            var d = Wa.date.locate, k = "", m = [], ca, bb;
            c = c || "mediumDate";
            c = d[c] || c;
            "string" === typeof b && (h.test(b) ? b = parseInt(b, 10) : (b = b.trim().replace(l, function (b, c, d, e) {
                return (4 === e.length ? [e, c, d] : [c, d, e]).join("-")
            }), b = e(b)), b = new Date(b));
            "number" === typeof b && (b = new Date(b));
            if ("date" === avalon.type(b)) {
                for (; c;)(bb = g.exec(c)) ? (m = m.concat(bb.slice(1)), c = m.pop()):
                    (m.push(c), c = null);
                m.forEach(function (c) {
                    ca = f[c];
                    k += ca ? ca(b, d) : c.replace(/(^'|'$)/g, "").replace(/''/g, "'")
                });
                return k
            }
        };
        var m = {
            AMPMS: {"0": "\u4e0a\u5348", 1: "\u4e0b\u5348"},
            DAY: {
                "0": "\u661f\u671f\u65e5",
                1: "\u661f\u671f\u4e00",
                2: "\u661f\u671f\u4e8c",
                3: "\u661f\u671f\u4e09",
                4: "\u661f\u671f\u56db",
                5: "\u661f\u671f\u4e94",
                6: "\u661f\u671f\u516d"
            },
            MONTH: {
                "0": "1\u6708",
                1: "2\u6708",
                2: "3\u6708",
                3: "4\u6708",
                4: "5\u6708",
                5: "6\u6708",
                6: "7\u6708",
                7: "8\u6708",
                8: "9\u6708",
                9: "10\u6708",
                10: "11\u6708",
                11: "12\u6708"
            },
            SHORTDAY: {
                "0": "\u5468\u65e5",
                1: "\u5468\u4e00",
                2: "\u5468\u4e8c",
                3: "\u5468\u4e09",
                4: "\u5468\u56db",
                5: "\u5468\u4e94",
                6: "\u5468\u516d"
            },
            fullDate: "y\u5e74M\u6708d\u65e5EEEE",
            longDate: "y\u5e74M\u6708d\u65e5",
            medium: "yyyy-M-d H:mm:ss",
            mediumDate: "yyyy-M-d",
            mediumTime: "H:mm:ss",
            "short": "yy-M-d ah:mm",
            shortDate: "yy-M-d",
            shortTime: "ah:mm"
        };
        m.SHORTMONTH = m.MONTH;
        Wa.date.locate = m
    };
    var t = avalon.modules = {"ready!": {exports: avalon}, avalon: {exports: avalon, state: 2}};
    new function () {
        function b(b) {
            return (b || "").replace(/[?#].*/, "")
        }

        function c(b) {
            var c;
            try {
                a.b.c()
            } catch (d) {
                c = d.stack, !c && r.opera && (c = (String(d).match(/of linked script \S+/g) || []).join(" "))
            }
            if (c)return c = c.split(/[@ ]/g).pop(), c = "(" === c[0] ? c.slice(1, -1) : c.replace(/\s/, ""), c.replace(/(:\d+)?:\d+$/i, "");
            c = (b ? q : I).getElementsByTagName("script");
            for (var e = c.length, f; f = c[--e];)if ((b || f.className === G) && "interactive" === f.readyState)return f.className = f.src
        }

        function d(b, c) {
            for (var e in b)if ("\u53f8\u5f92\u6b63\u7f8e" === b[e] && 2 !== t[e].state && (e === c || d(t[e].deps, c)))return !0
        }

        function e() {
            var b =
                l.length, c;
            a:for (; c = l[--b];) {
                c = t[c];
                var d = c.deps, f;
                for (f in d)if (L.call(d, f) && 2 !== t[f].state)continue a;
                2 !== c.state && (l.splice(b, 1), k(c.id, c.args, c.factory), e())
            }
        }

        function f(c, d, e) {
            var f = b(c.src);
            c.onload = c.onreadystatechange = c.onerror = null;
            if (d || e && !t[f].state)setTimeout(function () {
                I.removeChild(c);
                c = null
            }), x("debug: \u52a0\u8f7d " + f + " \u5931\u8d25" + d + " " + !t[f].state); else return !0
        }

        function g(c, d, e, f) {
            if ("ready!" === c || t[c] && 2 === t[c].state)return c;
            var g;
            c = c.replace(/^\w+!/, function (b) {
                g = b.slice(0,
                    -1);
                return ""
            });
            g = g || "js";
            g = V[g] || z;
            "object" === typeof u.shim[c] && (f = u.shim[c]);
            c = c.split("/");
            for (var h = c.length, k; 0 < h; h -= 1)if (k = c.slice(0, h).join("/"), k = u.paths[k]) {
                Array.isArray(k) && (k = k[0]);
                c.splice(0, h, k);
                break
            }
            c = c.join("/");
            if (/^(\w+)(\d)?:.*/.test(c))e = c; else if (d = d.substr(0, d.lastIndexOf("/")), h = c.charAt(0), "." !== h && "/" !== h)e = n + c; else if ("./" === c.slice(0, 2))e = d + c.slice(1); else if (".." === c.slice(0, 2))for (e = d + "/" + c; s.test(e);)e = e.replace(s, ""); else"/" === h ? e = c : avalon.error("\u4e0d\u7b26\u5408\u6a21\u5757\u6807\u8bc6\u89c4\u5219: " +
            c);
            c = b(e);
            (d = g.ext) && c.slice(0 - d.length) !== d && (e += d);
            u.nocache && (e += (-1 === e.indexOf("?") ? "?" : "&") + (new Date - 0));
            return g(e, f)
        }

        function h(b, c, d) {
            var e = q.createElement("script");
            e.className = G;
            e[y ? "onload" : "onreadystatechange"] = function () {
                if (y || /loaded|complete/i.test(e.readyState)) {
                    var g = m.pop();
                    g && g.delay(c);
                    d && d();
                    f(e, !1, !y) && x("debug: \u5df2\u6210\u529f\u52a0\u8f7d " + b)
                }
            };
            e.onerror = function () {
                f(e, !0)
            };
            e.src = b;
            I.insertBefore(e, I.firstChild);
            x("debug: \u6b63\u51c6\u5907\u52a0\u8f7d " + b)
        }

        function k(b,
                   c, d) {
            for (var e = 0, f = [], g; g = c[e++];)f.push(t[g].exports);
            c = Object(t[b]);
            d = d.apply(r, f);
            c.state = 2;
            void 0 !== d && (t[b].exports = d);
            return d
        }

        var l = [], m = [], n, p = c(!0);
        p || (p = avalon.slice(q.scripts).pop().src);
        p = b(p);
        n = u.base = p.slice(0, p.lastIndexOf("/") + 1);
        C = avalon.require = function (b, c, d) {
            Array.isArray(b) || avalon.error("require\u7684\u7b2c\u4e00\u4e2a\u53c2\u6570\u5fc5\u987b\u662f\u4f9d\u8d56\u5217\u6570,\u7c7b\u578b\u4e3a\u6570\u7ec4 " + b);
            var f = [], h = {}, m = 0, q = 0, p = d || "callback" + setTimeout("1");
            d = d || n;
            b.forEach(function (b) {
                if (b =
                        g(b, d))m++, t[b] && 2 === t[b].state && q++, h[b] || (f.push(b), h[b] = "\u53f8\u5f92\u6b63\u7f8e")
            });
            t[p] = {id: p, factory: c, deps: h, args: f, state: 1};
            m === q ? k(p, f, c) : l.unshift(p);
            e()
        };
        C.define = function (e, f, g) {
            var h = la.call(arguments);
            if ("string" === typeof e)var k = h.shift();
            "function" === typeof h[0] && h.unshift([]);
            var l = t[k] && 1 <= t[k].state ? k : b(c());
            !t[l] && k && (t[l] = {id: l, factory: g, state: 1});
            g = h[1];
            g.id = k;
            g.delay = function (b) {
                h.push(b);
                var c = !0;
                try {
                    c = d(t[b].deps, b)
                } catch (e) {
                }
                c && avalon.error(b + "\u6a21\u5757\u4e0e\u4e4b\u524d\u7684\u6a21\u5757\u5b58\u5728\u5faa\u73af\u4f9d\u8d56\uff0c\u8bf7\u4e0d\u8981\u76f4\u63a5\u7528script\u6807\u7b7e\u5f15\u5165" +
                b + "\u6a21\u5757");
                delete g.delay;
                C.apply(null, h)
            };
            l ? g.delay(l) : m.push(g)
        };
        C.define.amd = t;
        var s = /\/\w+\/\.\./;
        V.js = function (c, d) {
            var e = b(c);
            t[e] || (t[e] = {id: e, exports: {}}, d ? C(d.deps || "", function () {
                h(c, e, function () {
                    t[e].state = 2;
                    var b = d.exports;
                    b && void 0 === t[e].exports && (t[e].exports = "function" === typeof b ? b() : r[b]);
                    C.checkDeps()
                })
            }) : h(c, e));
            return e
        };
        V.css = function (c) {
            var d = b(c).replace(/\W/g, "_");
            if (!q.getElementById(d)) {
                var e = q.createElement("link");
                e.rel = "stylesheet";
                e.href = c;
                e.id = d;
                I.insertBefore(e,
                    I.firstChild)
            }
        };
        V.css.ext = ".css";
        V.js.ext = ".js";
        V.text = function (c) {
            var d = Ua(), e = b(c);
            t[e] = {};
            d.onreadystatechange = function () {
                if (4 === d.readyState) {
                    var b = d.status;
                    399 < b && 600 > b ? avalon.error(c + " \u5bf9\u5e94\u8d44\u6e90\u4e0d\u5b58\u5728\u6216\u6ca1\u6709\u5f00\u542f CORS") : (t[e].state = 2, t[e].exports = d.responseText, C.checkDeps())
                }
            };
            d.open("GET", c, !0);
            "withCredentials"in d && (d.withCredentials = !0);
            d.setRequestHeader("X-Requested-With", "XMLHttpRequest");
            d.send();
            return e
        };
        C.config = u;
        C.checkDeps = e
    };
    var Jb =
        [];
    if ("complete" === q.readyState)setTimeout(U); else if (y)q.addEventListener("DOMContentLoaded", U); else {
        q.attachEvent("onreadystatechange", function () {
            "complete" === q.readyState && U()
        });
        var Xa;
        try {
            Xa = null != r.frameElement
        } catch (Dd) {
            Xa = !0
        }
        B.doScroll && !Xa && Kb()
    }
    avalon.bind(r, "load", U);
    avalon.ready = function (b) {
        C ? C(["ready!"], b) : U === z ? b(avalon) : Jb.push(b)
    };
    avalon.config({loader: !0});
    avalon.ready(function () {
        avalon.scan(q.body)
    });
    "function" === typeof define && define.amd && define("avalon", [], function () {
        return avalon
    });
    avalon.noConflict = function (b) {
        b && r.avalon === avalon && (r.avalon = avalon);
        return avalon
    };
    void 0 === $ && (r.avalon = avalon);
    return avalon
});
